"use strict";(self.webpackChunkmap_us=self.webpackChunkmap_us||[]).push([[563],{563:function(t,e,r){r.r(e);var n=r(37),a=r(791),o=r(514),s=r(90),i=r(873),c=r(828),u=r(54),l=r(287),d=r(476),f=r(47),h=r(71),v=r(184);e.default=function(t){var e=t.countyGeometry,r=t.stateGeometry,p=t.baseTopology,m=t.stateFilter,y=t.handleMouseMove,Z=t.handleMouseOut,g=t.handleMouseOver,w=t.setTooltipText,b=t.updateTranslations,k=(0,a.useRef)(),x=(0,a.useRef)(),M=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.attr("transform").match(/-?\d+(\.\d+)?/g),a=(0,n.Z)(r,2),o=a[0],s=a[1];if(Math.abs(+o)<.25&&Math.abs(+s)<.25){if(t.attr("transform","translate(0,0)"),T(t),e)return[0,0]}else if(e)return[+o,+s]},T=function(t){t.attr("stroke-width",.1).attr("stroke","lightgray").attr("fill","slategray").on(".drag",null).lower(),(0,s.Z)("#state-".concat(t.attr("state-id"))).lower()},j=(0,l.Z)().on("start",(function(){w(""),(0,s.Z)(this).raise(),(0,i.Z)(".county").attr("pointer-events","none")})).on("drag",(function(t){var e=t.dx,r=t.dy,n=(0,s.Z)(this).node().transform.baseVal[0].matrix,a=n.e,o=n.f;(0,s.Z)(this).attr("transform","translate(".concat(a+e,",").concat(o+r,")"))})).on("end",(function(t){b(t.subject.id,M((0,s.Z)(this))),(0,i.Z)(".county").attr("pointer-events","all")}));return(0,a.useEffect)((function(){(0,s.Z)(k.current).selectAll("*").remove();var t=window.outerWidth,a=window.innerHeight,o={type:"GeometryCollection",geometries:e},i={type:"GeometryCollection",geometries:r},l=(0,c.Z)().translate([t/2,a/2]).scale(900),v=(0,u.Z)().projection(l),m=(0,s.Z)(k.current).append("svg").attr("width",t).attr("height",a).attr("viewBox","0 0 ".concat(t," ").concat(a));m.selectAll(".state").data((0,d.Z)(p,i).features).enter().append("path").attr("class","state").attr("d",v).attr("fill",(function(t){var e=t.id;return f.L[e].color})).attr("id",(function(t){var e=t.id;return"state-".concat(e)})),m.selectAll(".county").data((0,d.Z)(p,o).features).enter().append("path").attr("class","county").attr("d",v).attr("stroke",(function(t){var e=t.id;return f.L[(0,h.f)(e)].color})).attr("stroke-width",.15).attr("fill","lightgray").attr("id",(function(t){var e=t.id;return"county-".concat(e)})).attr("state-id",(function(t){var e=t.id;return"".concat((0,h.f)(e))})).attr("data-name",(function(t){var e=t.properties;return"".concat(e.name)})).attr("is-hidden",!1).attr("transform",(function(t){var e=(0,n.Z)(t.properties.transpose,2),r=e[0],a=e[1];return"translate(".concat(r,", ").concat(a,")")})).on("mouseover",(function(t,e){"false"===(0,s.Z)(this).attr("is-hidden")&&g(t,e)})).on("mousemove",(function(t){return y(t)})).on("mouseout",Z).call(j).each((function(){M((0,s.Z)(this),!1)}))}),[e]),(0,a.useEffect)((function(){if(m){var t=(0,s.Z)("#state-".concat(m)).node();x.current.zoomToElement(t,2,500,"easeOut")}else x.current.resetTransform(500,"easeOut");(0,i.Z)(".county, .state").style("visibility","visible").attr("pointer-events","all").attr("is-hidden",!1),m.length&&(0,i.Z)(".county, .state").filter((function(t){var e=t.id;return!m.includes((0,h.f)(e))})).style("visibility","hidden").attr("pointer-events","none").attr("is-hidden",!0)}),[m,e]),(0,v.jsx)(o.d$,{ref:x,children:(0,v.jsx)(o.Uv,{children:(0,v.jsx)("div",{ref:k,className:"pieces"})})})}}}]);
//# sourceMappingURL=563.ea254a51.chunk.js.map