"use strict";(self.webpackChunkcounty_puzzle=self.webpackChunkcounty_puzzle||[]).push([[330],{330:function(t,e,n){n.r(e),n.d(e,{default:function(){return h}});var r=n(885),a=n(791),o=n(514),s=n(173),i=n(187),c=n(476),u=n(366),l=n(156),d=function(t){t.attr("transform","translate(0,0)").attr("stroke-width",.1).attr("stroke","lightgray").attr("fill","slategray").on(".drag",null).lower(),(0,i.Ys)("#state-".concat(t.attr("state-id"))).lower()},f=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.attr("transform").match(/-?\d+(\.\d+)?/g),a=(0,r.Z)(n,2),o=a[0],s=a[1];if(Math.abs(+o)<.75&&Math.abs(+s)<.75){if(d(t),e)return[0,0]}else if(e)return[+o,+s]},p=n(184),h=function(t){var e=t.translatedCountyGeometry,n=t.stateGeometry,d=t.baseTopology,h=t.stateFilter,v=t.toolTipHandlers,m=t.setTooltipText,y=t.updateTranslations,g=(0,a.useRef)(),Y=(0,a.useRef)(),w=v.showTip,b=v.moveTip,T=v.clearTip,k=(0,i.oh)().on("start",(function(){m(""),(0,i.Ys)(this).raise(),(0,i.td)(".county").attr("pointer-events","none")})).on("drag",(function(t){var e=t.dx,n=t.dy,r=(0,i.Ys)(this).node().transform.baseVal[0].matrix,a=r.e,o=r.f;(0,i.Ys)(this).attr("transform","translate(".concat(a+e,",").concat(o+n,")"))})).on("end",(function(t){var e=t.subject;y(e.id,f((0,i.Ys)(this))),(0,i.td)(".county").attr("pointer-events","all")})),x=(0,i.oh)().on("start",(function(){m(""),(0,i.Ys)(this).raise(),(0,i.td)(".county").attr("pointer-events","none")})).on("drag",(function(t){var e=t.dx,n=t.dy,r=(0,i.Ys)(this).node().transform.baseVal[0].matrix,a=r.e,o=r.f,s=r.a,c=r.d,u=Y.current.instance.transformState.scale,l=a+e/s/u,d=o+n/c/u;(0,i.Ys)(this).attr("transform","translate(".concat(l,",").concat(d,")"))})).on("end",(function(t){var e=t.subject;y(e.id,f((0,i.Ys)(this))),(0,i.td)(".county").attr("pointer-events","all")}));return(0,a.useLayoutEffect)((function(){(0,i.Ys)(g.current).selectAll("*").remove();var t=window.outerWidth,a=window.outerHeight,o={type:"GeometryCollection",geometries:e},p={type:"GeometryCollection",geometries:n},h=(0,i.wk)().translate([t/2,a/2]).scale(900),v=(0,i.l4)().projection(h),m=(0,i.Ys)(g.current).append("svg").attr("width",t).attr("height",a).attr("viewBox","0 0 ".concat(t," ").concat(a));m.selectAll(".state").data((0,c.Z)(d,p).features).enter().append("path").attr("class","state").attr("d",v).attr("fill",(function(t){var e=t.id;return u.L[e].color})).attr("id",(function(t){var e=t.id;return"state-".concat(e)}));var y=m.selectAll(".county").data((0,c.Z)(d,o).features).enter().append("path").attr("class","county").attr("d",v).attr("stroke",(function(t){var e=t.id;return u.L[(0,l.f)(e)].color})).attr("stroke-width",.15).attr("fill","lightgray").attr("id",(function(t){var e=t.id;return"county-".concat(e)})).attr("state-id",(function(t){var e=t.id;return"".concat((0,l.f)(e))})).attr("data-name",(function(t){var e=t.properties;return"".concat(e.name)})).attr("is-hidden",!1).attr("transform",(function(t){var e=(0,r.Z)(t.properties.transpose,2),n=e[0],a=e[1];return"translate(".concat(n,", ").concat(a,")")})).on("mouseover",(function(t,e){var n=t.pageX,r=t.pageY,a=e.properties;"false"===(0,i.Ys)(this).attr("is-hidden")&&w(n,r,a)})).on("mousemove",(function(t){var e=t.pageX,n=t.pageY;return b(e,n)})).on("mouseout",(function(){return T()})),Y="Chrome"===s.KC?k:x;y.call(Y).each((function(){f((0,i.Ys)(this),!1)}))}),[e]),(0,a.useEffect)((function(){!function(t){(0,i.td)(".county, .state").style("visibility","visible").attr("pointer-events","all").attr("is-hidden",!1),t&&(0,i.td)(".county, .state").filter((function(e){var n=e.id;return!t.includes((0,l.f)(n))})).style("visibility","hidden").attr("pointer-events","none").attr("is-hidden",!0)}(h),function(t,e){if(e){var n=(0,i.Ys)("#state-".concat(e)).node();t.current.zoomToElement(n,4,500,"easeOut")}else t.current.resetTransform(500,"easeOut")}(Y,h)}),[h,e]),(0,p.jsx)(o.d$,{ref:Y,children:(0,p.jsx)(o.Uv,{children:(0,p.jsx)("div",{ref:g,className:"pieces"})})})}}}]);
//# sourceMappingURL=330.9c2cda73.chunk.js.map