{"version":3,"file":"static/js/993.2a1855b3.chunk.js","mappings":"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","sources":["../node_modules/react-zoom-pan-pinch/src/utils/calculations.utils.ts","../node_modules/react-zoom-pan-pinch/src/utils/callback.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/animations/animations.constants.ts","../node_modules/react-zoom-pan-pinch/src/core/animations/animations.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/bounds/bounds.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/zoom/zoom.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/pan/panning.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/pan/velocity.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/pan/velocity.logic.ts","../node_modules/react-zoom-pan-pinch/src/core/pan/panning.logic.ts","../node_modules/react-zoom-pan-pinch/src/core/zoom/zoom.logic.ts","../node_modules/react-zoom-pan-pinch/node_modules/tslib/tslib.es6.js","../node_modules/react-zoom-pan-pinch/src/constants/state.constants.ts","../node_modules/react-zoom-pan-pinch/src/utils/state.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/handlers/handlers.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/handlers/handlers.logic.ts","../node_modules/react-zoom-pan-pinch/src/utils/context.utils.ts","../node_modules/react-zoom-pan-pinch/src/utils/event.utils.ts","../node_modules/react-zoom-pan-pinch/src/utils/helpers.utils.ts","../node_modules/react-zoom-pan-pinch/src/utils/styles.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/wheel/wheel.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/pinch/pinch.utils.ts","../node_modules/react-zoom-pan-pinch/src/core/wheel/wheel.logic.ts","../node_modules/react-zoom-pan-pinch/src/core/pinch/pinch.logic.ts","../node_modules/react-zoom-pan-pinch/src/core/double-click/double-click.logic.ts","../node_modules/react-zoom-pan-pinch/src/core/instance.core.ts","../node_modules/react-zoom-pan-pinch/src/components/transform-wrapper/transform-wrapper.tsx","../node_modules/react-zoom-pan-pinch/src/components/keep-scale/keep-scale.tsx","../node_modules/react-zoom-pan-pinch/src/utils/ref.utils.ts","../node_modules/react-zoom-pan-pinch/node_modules/style-inject/dist/style-inject.es.js","../node_modules/react-zoom-pan-pinch/src/components/transform-component/transform-component.tsx","../node_modules/topojson-client/src/identity.js","../node_modules/topojson-client/src/feature.js","../node_modules/topojson-client/src/transform.js","../node_modules/topojson-client/src/reverse.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../../../../node_modules/d3-array/src/fsum.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../../node_modules/d3-selection/src/pointer.js","../../../../node_modules/d3-selection/src/sourceEvent.js","../../../../node_modules/d3-drag/src/noevent.js","../../../../node_modules/d3-drag/src/constant.js","../../../../node_modules/d3-drag/src/event.js","../../../../node_modules/d3-drag/src/drag.js","../../../../node_modules/d3-drag/src/nodrag.js","../../../../node_modules/d3-geo/src/identity.js","../../../../node_modules/d3-geo/src/math.js","../../../../node_modules/d3-geo/src/noop.js","../../../../node_modules/d3-geo/src/path/bounds.js","../../../../node_modules/d3-geo/src/path/area.js","../../../../node_modules/d3-geo/src/path/centroid.js","../../../../node_modules/d3-geo/src/path/context.js","../../../../node_modules/d3-geo/src/path/measure.js","../../../../node_modules/d3-geo/src/path/string.js","../../../../node_modules/d3-geo/src/path/index.js","../../../../node_modules/d3-geo/src/clip/buffer.js","../../../../node_modules/d3-geo/src/pointEqual.js","../../../../node_modules/d3-geo/src/clip/rejoin.js","../../../../node_modules/d3-geo/src/cartesian.js","../../../../node_modules/d3-geo/src/polygonContains.js","../../../../node_modules/d3-array/src/merge.js","../../../../node_modules/d3-geo/src/clip/index.js","../../../../node_modules/d3-geo/src/clip/antimeridian.js","../../../../node_modules/d3-geo/src/circle.js","../../../../node_modules/d3-geo/src/clip/rectangle.js","../../../../node_modules/d3-geo/src/clip/line.js","../../../../node_modules/d3-geo/src/compose.js","../../../../node_modules/d3-geo/src/rotation.js","../../../../node_modules/d3-geo/src/transform.js","../../../../node_modules/d3-geo/src/projection/fit.js","../../../../node_modules/d3-geo/src/projection/resample.js","../../../../node_modules/d3-geo/src/projection/index.js","../../../../node_modules/d3-geo/src/clip/circle.js","../../../../node_modules/d3-geo/src/projection/conicEqualArea.js","../../../../node_modules/d3-geo/src/projection/cylindricalEqualArea.js","../../../../node_modules/d3-geo/src/projection/conic.js","../../../../node_modules/d3-geo/src/projection/albersUsa.js","../../../../node_modules/d3-geo/src/projection/albers.js","../../../../node_modules/d3-geo/src/stream.js","../../../../node_modules/d3-selection/src/select.js","../../../../node_modules/d3-selection/src/selectAll.js"],"sourcesContent":["/**\n * Rounds number to given decimal\n * eg. roundNumber(2.34343, 1) => 2.3\n */\nexport var roundNumber = function (num, decimal) {\n    return Number(num.toFixed(decimal));\n};\n/**\n * Checks if value is number, if not it returns default value\n * 1# eg. checkIsNumber(2, 30) => 2\n * 2# eg. checkIsNumber(null, 30) => 30\n */\nexport var checkIsNumber = function (num, defaultValue) {\n    return typeof num === \"number\" ? num : defaultValue;\n};\n","export var handleCallback = function (context, event, callback) {\n    if (callback && typeof callback === \"function\") {\n        callback(context, event);\n    }\n};\n","/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\n/**\n * Functions should return denominator of the target value, which is the next animation step.\n * t is a value from 0 to 1, reflecting the percentage of animation status.\n */\nvar easeOut = function (t) {\n    return -Math.cos(t * Math.PI) / 2 + 0.5;\n};\n// linear\nvar linear = function (t) {\n    return t;\n};\n// accelerating from zero velocity\nvar easeInQuad = function (t) {\n    return t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuad = function (t) {\n    return t * (2 - t);\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuad = function (t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n};\n// accelerating from zero velocity\nvar easeInCubic = function (t) {\n    return t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutCubic = function (t) {\n    return --t * t * t + 1;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutCubic = function (t) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n};\n// accelerating from zero velocity\nvar easeInQuart = function (t) {\n    return t * t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuart = function (t) {\n    return 1 - --t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuart = function (t) {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n};\n// accelerating from zero velocity\nvar easeInQuint = function (t) {\n    return t * t * t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuint = function (t) {\n    return 1 + --t * t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuint = function (t) {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n};\nexport var animations = {\n    easeOut: easeOut,\n    linear: linear,\n    easeInQuad: easeInQuad,\n    easeOutQuad: easeOutQuad,\n    easeInOutQuad: easeInOutQuad,\n    easeInCubic: easeInCubic,\n    easeOutCubic: easeOutCubic,\n    easeInOutCubic: easeInOutCubic,\n    easeInQuart: easeInQuart,\n    easeOutQuart: easeOutQuart,\n    easeInOutQuart: easeInOutQuart,\n    easeInQuint: easeInQuint,\n    easeOutQuint: easeOutQuint,\n    easeInOutQuint: easeInOutQuint,\n};\n","/* eslint-disable no-param-reassign */\nimport { animations } from \"./animations.constants\";\nvar handleCancelAnimationFrame = function (animation) {\n    if (typeof animation === \"number\") {\n        cancelAnimationFrame(animation);\n    }\n};\nexport var handleCancelAnimation = function (contextInstance) {\n    if (!contextInstance.mounted)\n        return;\n    handleCancelAnimationFrame(contextInstance.animation);\n    // Clear animation state\n    contextInstance.animate = false;\n    contextInstance.animation = null;\n    contextInstance.velocity = null;\n};\nexport function handleSetupAnimation(contextInstance, animationName, animationTime, callback) {\n    if (!contextInstance.mounted)\n        return;\n    var startTime = new Date().getTime();\n    var lastStep = 1;\n    // if another animation is active\n    handleCancelAnimation(contextInstance);\n    // new animation\n    contextInstance.animation = function () {\n        if (!contextInstance.mounted) {\n            return handleCancelAnimationFrame(contextInstance.animation);\n        }\n        var frameTime = new Date().getTime() - startTime;\n        var animationProgress = frameTime / animationTime;\n        var animationType = animations[animationName];\n        var step = animationType(animationProgress);\n        if (frameTime >= animationTime) {\n            callback(lastStep);\n            contextInstance.animation = null;\n        }\n        else if (contextInstance.animation) {\n            callback(step);\n            requestAnimationFrame(contextInstance.animation);\n        }\n    };\n    requestAnimationFrame(contextInstance.animation);\n}\nfunction isValidTargetState(targetState) {\n    var scale = targetState.scale, positionX = targetState.positionX, positionY = targetState.positionY;\n    if (Number.isNaN(scale) ||\n        Number.isNaN(positionX) ||\n        Number.isNaN(positionY)) {\n        return false;\n    }\n    return true;\n}\nexport function animate(contextInstance, targetState, animationTime, animationName) {\n    var isValid = isValidTargetState(targetState);\n    if (!contextInstance.mounted || !isValid)\n        return;\n    var setTransformState = contextInstance.setTransformState;\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    var scaleDiff = targetState.scale - scale;\n    var positionXDiff = targetState.positionX - positionX;\n    var positionYDiff = targetState.positionY - positionY;\n    if (animationTime === 0) {\n        setTransformState(targetState.scale, targetState.positionX, targetState.positionY);\n    }\n    else {\n        // animation start timestamp\n        handleSetupAnimation(contextInstance, animationName, animationTime, function (step) {\n            var newScale = scale + scaleDiff * step;\n            var newPositionX = positionX + positionXDiff * step;\n            var newPositionY = positionY + positionYDiff * step;\n            setTransformState(newScale, newPositionX, newPositionY);\n        });\n    }\n}\n","/* eslint-disable no-param-reassign */\nimport { roundNumber } from \"../../utils\";\nexport function getComponentsSizes(wrapperComponent, contentComponent, newScale) {\n    var wrapperWidth = wrapperComponent.offsetWidth;\n    var wrapperHeight = wrapperComponent.offsetHeight;\n    var contentWidth = contentComponent.offsetWidth;\n    var contentHeight = contentComponent.offsetHeight;\n    var newContentWidth = contentWidth * newScale;\n    var newContentHeight = contentHeight * newScale;\n    var newDiffWidth = wrapperWidth - newContentWidth;\n    var newDiffHeight = wrapperHeight - newContentHeight;\n    return {\n        wrapperWidth: wrapperWidth,\n        wrapperHeight: wrapperHeight,\n        newContentWidth: newContentWidth,\n        newDiffWidth: newDiffWidth,\n        newContentHeight: newContentHeight,\n        newDiffHeight: newDiffHeight,\n    };\n}\nexport var getBounds = function (wrapperWidth, newContentWidth, diffWidth, wrapperHeight, newContentHeight, diffHeight, centerZoomedOut) {\n    var scaleWidthFactor = wrapperWidth > newContentWidth\n        ? diffWidth * (centerZoomedOut ? 1 : 0.5)\n        : 0;\n    var scaleHeightFactor = wrapperHeight > newContentHeight\n        ? diffHeight * (centerZoomedOut ? 1 : 0.5)\n        : 0;\n    var minPositionX = wrapperWidth - newContentWidth - scaleWidthFactor;\n    var maxPositionX = scaleWidthFactor;\n    var minPositionY = wrapperHeight - newContentHeight - scaleHeightFactor;\n    var maxPositionY = scaleHeightFactor;\n    return { minPositionX: minPositionX, maxPositionX: maxPositionX, minPositionY: minPositionY, maxPositionY: maxPositionY };\n};\nexport var calculateBounds = function (contextInstance, newScale) {\n    var wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n    var centerZoomedOut = contextInstance.setup.centerZoomedOut;\n    if (!wrapperComponent || !contentComponent) {\n        throw new Error(\"Components are not mounted\");\n    }\n    var _a = getComponentsSizes(wrapperComponent, contentComponent, newScale), wrapperWidth = _a.wrapperWidth, wrapperHeight = _a.wrapperHeight, newContentWidth = _a.newContentWidth, newDiffWidth = _a.newDiffWidth, newContentHeight = _a.newContentHeight, newDiffHeight = _a.newDiffHeight;\n    var bounds = getBounds(wrapperWidth, newContentWidth, newDiffWidth, wrapperHeight, newContentHeight, newDiffHeight, Boolean(centerZoomedOut));\n    return bounds;\n};\n/**\n * Keeps value between given bounds, used for limiting view to given boundaries\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\n */\nexport var boundLimiter = function (value, minBound, maxBound, isActive) {\n    if (!isActive)\n        return roundNumber(value, 2);\n    if (value < minBound)\n        return roundNumber(minBound, 2);\n    if (value > maxBound)\n        return roundNumber(maxBound, 2);\n    return roundNumber(value, 2);\n};\nexport var handleCalculateBounds = function (contextInstance, newScale) {\n    var bounds = calculateBounds(contextInstance, newScale);\n    // Save bounds\n    contextInstance.bounds = bounds;\n    return bounds;\n};\nexport function getMouseBoundedPosition(positionX, positionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent) {\n    var minPositionX = bounds.minPositionX, minPositionY = bounds.minPositionY, maxPositionX = bounds.maxPositionX, maxPositionY = bounds.maxPositionY;\n    var paddingX = 0;\n    var paddingY = 0;\n    if (wrapperComponent) {\n        paddingX = paddingValueX;\n        paddingY = paddingValueY;\n    }\n    var x = boundLimiter(positionX, minPositionX - paddingX, maxPositionX + paddingX, limitToBounds);\n    var y = boundLimiter(positionY, minPositionY - paddingY, maxPositionY + paddingY, limitToBounds);\n    return { x: x, y: y };\n}\n","import { getMouseBoundedPosition } from \"../bounds/bounds.utils\";\nexport function handleCalculateZoomPositions(contextInstance, mouseX, mouseY, newScale, bounds, limitToBounds) {\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    var scaleDifference = newScale - scale;\n    if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\") {\n        console.error(\"Mouse X and Y position were not provided!\");\n        return { x: positionX, y: positionY };\n    }\n    var calculatedPositionX = positionX - mouseX * scaleDifference;\n    var calculatedPositionY = positionY - mouseY * scaleDifference;\n    // do not limit to bounds when there is padding animation,\n    // it causes animation strange behaviour\n    var newPositions = getMouseBoundedPosition(calculatedPositionX, calculatedPositionY, bounds, limitToBounds, 0, 0, null);\n    return newPositions;\n}\nexport function checkZoomBounds(zoom, minScale, maxScale, zoomPadding, enablePadding) {\n    var scalePadding = enablePadding ? zoomPadding : 0;\n    var minScaleWithPadding = minScale - scalePadding;\n    if (!Number.isNaN(maxScale) && zoom >= maxScale)\n        return maxScale;\n    if (!Number.isNaN(minScale) && zoom <= minScaleWithPadding)\n        return minScaleWithPadding;\n    return zoom;\n}\n","import { isExcludedNode } from \"../../utils\";\nimport { getMouseBoundedPosition } from \"../bounds/bounds.utils\";\nimport { handleCalculateZoomPositions } from \"../zoom/zoom.utils\";\nexport var isPanningStartAllowed = function (contextInstance, event) {\n    var excluded = contextInstance.setup.panning.excluded;\n    var isInitialized = contextInstance.isInitialized, wrapperComponent = contextInstance.wrapperComponent;\n    var target = event.target;\n    var isWrapperChild = wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(target);\n    var isAllowed = isInitialized && target && isWrapperChild;\n    if (!isAllowed)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\nexport var isPanningAllowed = function (contextInstance) {\n    var isInitialized = contextInstance.isInitialized, isPanning = contextInstance.isPanning, setup = contextInstance.setup;\n    var disabled = setup.panning.disabled;\n    var isAllowed = isInitialized && isPanning && !disabled;\n    if (!isAllowed)\n        return false;\n    return true;\n};\nexport var handlePanningSetup = function (contextInstance, event) {\n    var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY;\n    contextInstance.isPanning = true;\n    // Panning with mouse\n    var x = event.clientX;\n    var y = event.clientY;\n    contextInstance.startCoords = { x: x - positionX, y: y - positionY };\n};\nexport var handleTouchPanningSetup = function (contextInstance, event) {\n    var touches = event.touches;\n    var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY;\n    contextInstance.isPanning = true;\n    // Panning with touch\n    var oneFingerTouch = touches.length === 1;\n    if (oneFingerTouch) {\n        var x = touches[0].clientX;\n        var y = touches[0].clientY;\n        contextInstance.startCoords = { x: x - positionX, y: y - positionY };\n    }\n};\nexport function handlePanToBounds(contextInstance) {\n    var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale;\n    var _b = contextInstance.setup, disabled = _b.disabled, limitToBounds = _b.limitToBounds, centerZoomedOut = _b.centerZoomedOut;\n    var wrapperComponent = contextInstance.wrapperComponent;\n    if (disabled || !wrapperComponent || !contextInstance.bounds)\n        return;\n    var _c = contextInstance.bounds, maxPositionX = _c.maxPositionX, minPositionX = _c.minPositionX, maxPositionY = _c.maxPositionY, minPositionY = _c.minPositionY;\n    var xChanged = positionX > maxPositionX || positionX < minPositionX;\n    var yChanged = positionY > maxPositionY || positionY < minPositionY;\n    var mousePosX = positionX > maxPositionX\n        ? wrapperComponent.offsetWidth\n        : contextInstance.setup.minPositionX || 0;\n    var mousePosY = positionY > maxPositionY\n        ? wrapperComponent.offsetHeight\n        : contextInstance.setup.minPositionY || 0;\n    var _d = handleCalculateZoomPositions(contextInstance, mousePosX, mousePosY, scale, contextInstance.bounds, limitToBounds || centerZoomedOut), x = _d.x, y = _d.y;\n    return {\n        scale: scale,\n        positionX: xChanged ? x : positionX,\n        positionY: yChanged ? y : positionY,\n    };\n}\nexport function handlePaddingAnimation(contextInstance, positionX, positionY) {\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup.alignmentAnimation, sizeX = _a.sizeX, sizeY = _a.sizeY;\n    if (!sizeX && !sizeY)\n        return;\n    contextInstance.setTransformState(scale, positionX, positionY);\n}\nexport function handleNewPosition(contextInstance, newPositionX, newPositionY, paddingValueX, paddingValueY) {\n    var limitToBounds = contextInstance.setup.limitToBounds;\n    var wrapperComponent = contextInstance.wrapperComponent, bounds = contextInstance.bounds;\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    if (wrapperComponent === null ||\n        bounds === null ||\n        (newPositionX === positionX && newPositionY === positionY)) {\n        return;\n    }\n    var _b = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent), x = _b.x, y = _b.y;\n    contextInstance.setTransformState(scale, x, y);\n}\nexport var getPanningClientPosition = function (contextInstance, clientX, clientY) {\n    var startCoords = contextInstance.startCoords, transformState = contextInstance.transformState;\n    var panning = contextInstance.setup.panning;\n    var lockAxisX = panning.lockAxisX, lockAxisY = panning.lockAxisY;\n    var positionX = transformState.positionX, positionY = transformState.positionY;\n    if (!startCoords) {\n        return { x: positionX, y: positionY };\n    }\n    var mouseX = clientX - startCoords.x;\n    var mouseY = clientY - startCoords.y;\n    var newPositionX = lockAxisX ? positionX : mouseX;\n    var newPositionY = lockAxisY ? positionY : mouseY;\n    return { x: newPositionX, y: newPositionY };\n};\nexport var getPaddingValue = function (contextInstance, size) {\n    var setup = contextInstance.setup, transformState = contextInstance.transformState;\n    var scale = transformState.scale;\n    var minScale = setup.minScale, disablePadding = setup.disablePadding;\n    if (size > 0 && scale >= minScale && !disablePadding) {\n        return size;\n    }\n    return 0;\n};\n","import { boundLimiter } from \"../bounds/bounds.utils\";\nexport var isVelocityCalculationAllowed = function (contextInstance) {\n    var mounted = contextInstance.mounted;\n    var _a = contextInstance.setup, disabled = _a.disabled, velocityAnimation = _a.velocityAnimation;\n    var scale = contextInstance.transformState.scale;\n    var disabledVelocity = velocityAnimation.disabled;\n    var isAllowed = !disabledVelocity || scale > 1 || !disabled || mounted;\n    if (!isAllowed)\n        return false;\n    return true;\n};\nexport var isVelocityAllowed = function (contextInstance) {\n    var mounted = contextInstance.mounted, velocity = contextInstance.velocity, bounds = contextInstance.bounds;\n    var _a = contextInstance.setup, disabled = _a.disabled, velocityAnimation = _a.velocityAnimation;\n    var scale = contextInstance.transformState.scale;\n    var disabledVelocity = velocityAnimation.disabled;\n    var isAllowed = !disabledVelocity || scale > 1 || !disabled || mounted;\n    if (!isAllowed)\n        return false;\n    if (!velocity || !bounds)\n        return false;\n    return true;\n};\nexport function getVelocityMoveTime(contextInstance, velocity) {\n    var velocityAnimation = contextInstance.setup.velocityAnimation;\n    var equalToMove = velocityAnimation.equalToMove, animationTime = velocityAnimation.animationTime, sensitivity = velocityAnimation.sensitivity;\n    if (equalToMove) {\n        return animationTime * velocity * sensitivity;\n    }\n    return animationTime;\n}\nexport function getVelocityPosition(newPosition, startPosition, currentPosition, isLocked, limitToBounds, minPosition, maxPosition, minTarget, maxTarget, step) {\n    if (limitToBounds) {\n        if (startPosition > maxPosition && currentPosition > maxPosition) {\n            var calculatedPosition = maxPosition + (newPosition - maxPosition) * step;\n            if (calculatedPosition > maxTarget)\n                return maxTarget;\n            if (calculatedPosition < maxPosition)\n                return maxPosition;\n            return calculatedPosition;\n        }\n        if (startPosition < minPosition && currentPosition < minPosition) {\n            var calculatedPosition = minPosition + (newPosition - minPosition) * step;\n            if (calculatedPosition < minTarget)\n                return minTarget;\n            if (calculatedPosition > minPosition)\n                return minPosition;\n            return calculatedPosition;\n        }\n    }\n    if (isLocked)\n        return startPosition;\n    return boundLimiter(newPosition, minPosition, maxPosition, limitToBounds);\n}\n","import { animations } from \"../animations/animations.constants\";\nimport { handleSetupAnimation } from \"../animations/animations.utils\";\nimport { getPaddingValue } from \"./panning.utils\";\nimport { getVelocityPosition, getVelocityMoveTime, isVelocityAllowed, isVelocityCalculationAllowed, } from \"./velocity.utils\";\nexport function getSizeMultiplier(wrapperComponent, equalToMove) {\n    var defaultMultiplier = 1;\n    if (equalToMove) {\n        return Math.min(defaultMultiplier, wrapperComponent.offsetWidth / window.innerWidth);\n    }\n    return defaultMultiplier;\n}\nexport function handleCalculateVelocity(contextInstance, position) {\n    var isAllowed = isVelocityCalculationAllowed(contextInstance);\n    if (!isAllowed) {\n        return;\n    }\n    var lastMousePosition = contextInstance.lastMousePosition, velocityTime = contextInstance.velocityTime, setup = contextInstance.setup;\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var equalToMove = setup.velocityAnimation.equalToMove;\n    var now = Date.now();\n    if (lastMousePosition && velocityTime && wrapperComponent) {\n        var sizeMultiplier = getSizeMultiplier(wrapperComponent, equalToMove);\n        var distanceX = position.x - lastMousePosition.x;\n        var distanceY = position.y - lastMousePosition.y;\n        var velocityX = distanceX / sizeMultiplier;\n        var velocityY = distanceY / sizeMultiplier;\n        var interval = now - velocityTime;\n        var speed = distanceX * distanceX + distanceY * distanceY;\n        var velocity = Math.sqrt(speed) / interval;\n        contextInstance.velocity = { velocityX: velocityX, velocityY: velocityY, total: velocity };\n    }\n    contextInstance.lastMousePosition = position;\n    contextInstance.velocityTime = now;\n}\nexport function handleVelocityPanning(contextInstance) {\n    var velocity = contextInstance.velocity, bounds = contextInstance.bounds, setup = contextInstance.setup, wrapperComponent = contextInstance.wrapperComponent;\n    var isAllowed = isVelocityAllowed(contextInstance);\n    if (!isAllowed || !velocity || !bounds || !wrapperComponent) {\n        return;\n    }\n    var velocityX = velocity.velocityX, velocityY = velocity.velocityY, total = velocity.total;\n    var maxPositionX = bounds.maxPositionX, minPositionX = bounds.minPositionX, maxPositionY = bounds.maxPositionY, minPositionY = bounds.minPositionY;\n    var limitToBounds = setup.limitToBounds, alignmentAnimation = setup.alignmentAnimation;\n    var zoomAnimation = setup.zoomAnimation, panning = setup.panning;\n    var lockAxisY = panning.lockAxisY, lockAxisX = panning.lockAxisX;\n    var animationType = zoomAnimation.animationType;\n    var sizeX = alignmentAnimation.sizeX, sizeY = alignmentAnimation.sizeY, velocityAlignmentTime = alignmentAnimation.velocityAlignmentTime;\n    var alignAnimationTime = velocityAlignmentTime;\n    var moveAnimationTime = getVelocityMoveTime(contextInstance, total);\n    var finalAnimationTime = Math.max(moveAnimationTime, alignAnimationTime);\n    var paddingValueX = getPaddingValue(contextInstance, sizeX);\n    var paddingValueY = getPaddingValue(contextInstance, sizeY);\n    var paddingX = (paddingValueX * wrapperComponent.offsetWidth) / 100;\n    var paddingY = (paddingValueY * wrapperComponent.offsetHeight) / 100;\n    var maxTargetX = maxPositionX + paddingX;\n    var minTargetX = minPositionX - paddingX;\n    var maxTargetY = maxPositionY + paddingY;\n    var minTargetY = minPositionY - paddingY;\n    var startState = contextInstance.transformState;\n    var startTime = new Date().getTime();\n    handleSetupAnimation(contextInstance, animationType, finalAnimationTime, function (step) {\n        var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n        var frameTime = new Date().getTime() - startTime;\n        var animationProgress = frameTime / alignAnimationTime;\n        var alignAnimation = animations[alignmentAnimation.animationType];\n        var alignStep = 1 - alignAnimation(Math.min(1, animationProgress));\n        var customStep = 1 - step;\n        var newPositionX = positionX + velocityX * customStep;\n        var newPositionY = positionY + velocityY * customStep;\n        var currentPositionX = getVelocityPosition(newPositionX, startState.positionX, positionX, lockAxisX, limitToBounds, minPositionX, maxPositionX, minTargetX, maxTargetX, alignStep);\n        var currentPositionY = getVelocityPosition(newPositionY, startState.positionY, positionY, lockAxisY, limitToBounds, minPositionY, maxPositionY, minTargetY, maxTargetY, alignStep);\n        if (positionX !== newPositionX || positionY !== newPositionY) {\n            contextInstance.setTransformState(scale, currentPositionX, currentPositionY);\n        }\n    });\n}\n","import { animate, handleCancelAnimation } from \"../animations/animations.utils\";\nimport { handleCalculateBounds } from \"../bounds/bounds.utils\";\nimport { getPaddingValue, getPanningClientPosition, handleNewPosition, handlePanningSetup, handlePanToBounds, handleTouchPanningSetup, } from \"./panning.utils\";\nimport { handleVelocityPanning, handleCalculateVelocity, } from \"./velocity.logic\";\nexport function handlePanningStart(contextInstance, event) {\n    var scale = contextInstance.transformState.scale;\n    handleCancelAnimation(contextInstance);\n    handleCalculateBounds(contextInstance, scale);\n    if (window.TouchEvent !== undefined && event instanceof TouchEvent) {\n        handleTouchPanningSetup(contextInstance, event);\n    }\n    else {\n        handlePanningSetup(contextInstance, event);\n    }\n}\nexport function handleAlignToBounds(contextInstance) {\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup, minScale = _a.minScale, alignmentAnimation = _a.alignmentAnimation;\n    var disabled = alignmentAnimation.disabled, sizeX = alignmentAnimation.sizeX, sizeY = alignmentAnimation.sizeY, animationTime = alignmentAnimation.animationTime, animationType = alignmentAnimation.animationType;\n    var isDisabled = disabled || scale < minScale || (!sizeX && !sizeY);\n    if (isDisabled)\n        return;\n    var targetState = handlePanToBounds(contextInstance);\n    if (targetState) {\n        animate(contextInstance, targetState, animationTime, animationType);\n    }\n}\nexport function handlePanning(contextInstance, clientX, clientY) {\n    var startCoords = contextInstance.startCoords, setup = contextInstance.setup;\n    var _a = setup.alignmentAnimation, sizeX = _a.sizeX, sizeY = _a.sizeY;\n    if (!startCoords)\n        return;\n    var _b = getPanningClientPosition(contextInstance, clientX, clientY), x = _b.x, y = _b.y;\n    var paddingValueX = getPaddingValue(contextInstance, sizeX);\n    var paddingValueY = getPaddingValue(contextInstance, sizeY);\n    handleCalculateVelocity(contextInstance, { x: x, y: y });\n    handleNewPosition(contextInstance, x, y, paddingValueX, paddingValueY);\n}\nexport function handlePanningEnd(contextInstance) {\n    if (contextInstance.isPanning) {\n        var velocityDisabled = contextInstance.setup.panning.velocityDisabled;\n        var velocity = contextInstance.velocity, wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n        contextInstance.isPanning = false;\n        contextInstance.animate = false;\n        contextInstance.animation = null;\n        var wrapperRect = wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.getBoundingClientRect();\n        var contentRect = contentComponent === null || contentComponent === void 0 ? void 0 : contentComponent.getBoundingClientRect();\n        var wrapperWidth = (wrapperRect === null || wrapperRect === void 0 ? void 0 : wrapperRect.width) || 0;\n        var wrapperHeight = (wrapperRect === null || wrapperRect === void 0 ? void 0 : wrapperRect.height) || 0;\n        var contentWidth = (contentRect === null || contentRect === void 0 ? void 0 : contentRect.width) || 0;\n        var contentHeight = (contentRect === null || contentRect === void 0 ? void 0 : contentRect.height) || 0;\n        var isZoomed = wrapperWidth < contentWidth || wrapperHeight < contentHeight;\n        var shouldAnimate = !velocityDisabled && velocity && (velocity === null || velocity === void 0 ? void 0 : velocity.total) > 0.1 && isZoomed;\n        if (shouldAnimate) {\n            handleVelocityPanning(contextInstance);\n        }\n        else {\n            handleAlignToBounds(contextInstance);\n        }\n    }\n}\n","import { roundNumber } from \"../../utils\";\nimport { animate } from \"../animations/animations.utils\";\nimport { handleCalculateBounds } from \"../bounds/bounds.utils\";\nimport { handleAlignToBounds } from \"../pan/panning.logic\";\nimport { checkZoomBounds, handleCalculateZoomPositions } from \"./zoom.utils\";\nexport function handleZoomToPoint(contextInstance, scale, mouseX, mouseY) {\n    var _a = contextInstance.setup, minScale = _a.minScale, maxScale = _a.maxScale, limitToBounds = _a.limitToBounds;\n    var newScale = checkZoomBounds(roundNumber(scale, 2), minScale, maxScale, 0, false);\n    var bounds = handleCalculateBounds(contextInstance, newScale);\n    var _b = handleCalculateZoomPositions(contextInstance, mouseX, mouseY, newScale, bounds, limitToBounds), x = _b.x, y = _b.y;\n    return { scale: newScale, positionX: x, positionY: y };\n}\nexport function handleAlignToScaleBounds(contextInstance, mousePositionX, mousePositionY) {\n    var scale = contextInstance.transformState.scale;\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var _a = contextInstance.setup, minScale = _a.minScale, limitToBounds = _a.limitToBounds, zoomAnimation = _a.zoomAnimation;\n    var disabled = zoomAnimation.disabled, animationTime = zoomAnimation.animationTime, animationType = zoomAnimation.animationType;\n    var isDisabled = disabled || scale >= minScale;\n    if (scale >= 1 || limitToBounds) {\n        // fire fit to bounds animation\n        handleAlignToBounds(contextInstance);\n    }\n    if (isDisabled || !wrapperComponent || !contextInstance.mounted)\n        return;\n    var mouseX = mousePositionX || wrapperComponent.offsetWidth / 2;\n    var mouseY = mousePositionY || wrapperComponent.offsetHeight / 2;\n    var targetState = handleZoomToPoint(contextInstance, minScale, mouseX, mouseY);\n    if (targetState) {\n        animate(contextInstance, targetState, animationTime, animationType);\n    }\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export var initialState = {\n    previousScale: 1,\n    scale: 1,\n    positionX: 0,\n    positionY: 0,\n};\nexport var initialSetup = {\n    disabled: false,\n    minPositionX: null,\n    maxPositionX: null,\n    minPositionY: null,\n    maxPositionY: null,\n    minScale: 1,\n    maxScale: 8,\n    limitToBounds: true,\n    centerZoomedOut: false,\n    centerOnInit: false,\n    disablePadding: false,\n    wheel: {\n        step: 0.2,\n        disabled: false,\n        wheelDisabled: false,\n        touchPadDisabled: false,\n        activationKeys: [],\n        excluded: [],\n    },\n    panning: {\n        disabled: false,\n        velocityDisabled: false,\n        lockAxisX: false,\n        lockAxisY: false,\n        activationKeys: [],\n        excluded: [],\n    },\n    pinch: {\n        step: 5,\n        disabled: false,\n        excluded: [],\n    },\n    doubleClick: {\n        disabled: false,\n        step: 0.7,\n        mode: \"zoomIn\",\n        animationType: \"easeOut\",\n        animationTime: 200,\n        excluded: [],\n    },\n    zoomAnimation: {\n        disabled: false,\n        size: 0.4,\n        animationTime: 200,\n        animationType: \"easeOut\",\n    },\n    alignmentAnimation: {\n        disabled: false,\n        sizeX: 100,\n        sizeY: 100,\n        animationTime: 200,\n        velocityAlignmentTime: 400,\n        animationType: \"easeOut\",\n    },\n    velocityAnimation: {\n        disabled: false,\n        sensitivity: 1,\n        animationTime: 400,\n        animationType: \"easeOut\",\n        equalToMove: true,\n    },\n};\n","import { __assign, __spreadArray } from \"tslib\";\nimport { initialSetup, initialState } from \"../constants/state.constants\";\nexport var createState = function (props) {\n    var _a, _b, _c, _d;\n    return {\n        previousScale: (_a = props.initialScale) !== null && _a !== void 0 ? _a : initialState.scale,\n        scale: (_b = props.initialScale) !== null && _b !== void 0 ? _b : initialState.scale,\n        positionX: (_c = props.initialPositionX) !== null && _c !== void 0 ? _c : initialState.positionX,\n        positionY: (_d = props.initialPositionY) !== null && _d !== void 0 ? _d : initialState.positionY,\n    };\n};\nexport var createSetup = function (props) {\n    var newSetup = __assign({}, initialSetup);\n    Object.keys(props).forEach(function (key) {\n        var validValue = typeof props[key] !== \"undefined\";\n        var validParameter = typeof initialSetup[key] !== \"undefined\";\n        if (validParameter && validValue) {\n            var dataType = Object.prototype.toString.call(initialSetup[key]);\n            var isObject = dataType === \"[object Object]\";\n            var isArray = dataType === \"[object Array]\";\n            if (isObject) {\n                newSetup[key] = __assign(__assign({}, initialSetup[key]), props[key]);\n            }\n            else if (isArray) {\n                newSetup[key] = __spreadArray(__spreadArray([], initialSetup[key], true), props[key], true);\n            }\n            else {\n                newSetup[key] = props[key];\n            }\n        }\n    });\n    return newSetup;\n};\n","import { handleZoomToPoint } from \"../zoom/zoom.logic\";\nimport { animate } from \"../animations/animations.utils\";\nimport { createState } from \"../../utils/state.utils\";\nimport { checkZoomBounds } from \"../zoom/zoom.utils\";\nimport { roundNumber } from \"../../utils\";\nimport { calculateBounds, getMouseBoundedPosition, } from \"../bounds/bounds.utils\";\nexport var handleCalculateButtonZoom = function (contextInstance, delta, step) {\n    var scale = contextInstance.transformState.scale;\n    var wrapperComponent = contextInstance.wrapperComponent, setup = contextInstance.setup;\n    var maxScale = setup.maxScale, minScale = setup.minScale, zoomAnimation = setup.zoomAnimation;\n    var size = zoomAnimation.size;\n    if (!wrapperComponent) {\n        throw new Error(\"Wrapper is not mounted\");\n    }\n    var targetScale = scale * Math.exp(delta * step);\n    var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, false);\n    return newScale;\n};\nexport function handleZoomToViewCenter(contextInstance, delta, step, animationTime, animationType) {\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    if (!wrapperComponent)\n        return console.error(\"No WrapperComponent found\");\n    var wrapperWidth = wrapperComponent.offsetWidth;\n    var wrapperHeight = wrapperComponent.offsetHeight;\n    var mouseX = (wrapperWidth / 2 - positionX) / scale;\n    var mouseY = (wrapperHeight / 2 - positionY) / scale;\n    var newScale = handleCalculateButtonZoom(contextInstance, delta, step);\n    var targetState = handleZoomToPoint(contextInstance, newScale, mouseX, mouseY);\n    if (!targetState) {\n        return console.error(\"Error during zoom event. New transformation state was not calculated.\");\n    }\n    animate(contextInstance, targetState, animationTime, animationType);\n}\nexport function resetTransformations(contextInstance, animationTime, animationType, onResetTransformation) {\n    var setup = contextInstance.setup, wrapperComponent = contextInstance.wrapperComponent;\n    var limitToBounds = setup.limitToBounds;\n    var initialTransformation = createState(contextInstance.props);\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    if (!wrapperComponent)\n        return;\n    var newBounds = calculateBounds(contextInstance, initialTransformation.scale);\n    var boundedPositions = getMouseBoundedPosition(initialTransformation.positionX, initialTransformation.positionY, newBounds, limitToBounds, 0, 0, wrapperComponent);\n    var newState = {\n        scale: initialTransformation.scale,\n        positionX: boundedPositions.x,\n        positionY: boundedPositions.y,\n    };\n    if (scale === initialTransformation.scale &&\n        positionX === initialTransformation.positionX &&\n        positionY === initialTransformation.positionY) {\n        return;\n    }\n    onResetTransformation === null || onResetTransformation === void 0 ? void 0 : onResetTransformation();\n    animate(contextInstance, newState, animationTime, animationType);\n}\nexport function getOffset(element, wrapper, content, state) {\n    var offset = element.getBoundingClientRect();\n    var wrapperOffset = wrapper.getBoundingClientRect();\n    var contentOffset = content.getBoundingClientRect();\n    var xOff = wrapperOffset.x * state.scale;\n    var yOff = wrapperOffset.y * state.scale;\n    return {\n        x: (offset.x - contentOffset.x + xOff) / state.scale,\n        y: (offset.y - contentOffset.y + yOff) / state.scale,\n    };\n}\nexport function calculateZoomToNode(contextInstance, node, customZoom) {\n    var wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent, transformState = contextInstance.transformState;\n    var _a = contextInstance.setup, limitToBounds = _a.limitToBounds, minScale = _a.minScale, maxScale = _a.maxScale;\n    if (!wrapperComponent || !contentComponent)\n        return transformState;\n    var wrapperRect = wrapperComponent.getBoundingClientRect();\n    var nodeRect = node.getBoundingClientRect();\n    var nodeOffset = getOffset(node, wrapperComponent, contentComponent, transformState);\n    var nodeLeft = nodeOffset.x;\n    var nodeTop = nodeOffset.y;\n    var nodeWidth = nodeRect.width / transformState.scale;\n    var nodeHeight = nodeRect.height / transformState.scale;\n    var scaleX = wrapperComponent.offsetWidth / nodeWidth;\n    var scaleY = wrapperComponent.offsetHeight / nodeHeight;\n    var newScale = checkZoomBounds(customZoom || Math.min(scaleX, scaleY), minScale, maxScale, 0, false);\n    var offsetX = (wrapperRect.width - nodeWidth * newScale) / 2;\n    var offsetY = (wrapperRect.height - nodeHeight * newScale) / 2;\n    var newPositionX = (wrapperRect.left - nodeLeft) * newScale + offsetX;\n    var newPositionY = (wrapperRect.top - nodeTop) * newScale + offsetY;\n    var bounds = calculateBounds(contextInstance, newScale);\n    var _b = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, 0, 0, wrapperComponent), x = _b.x, y = _b.y;\n    return { positionX: x, positionY: y, scale: newScale };\n}\n","import { calculateZoomToNode, handleZoomToViewCenter, resetTransformations, } from \"./handlers.utils\";\nimport { animate, handleCancelAnimation } from \"../animations/animations.utils\";\nimport { getCenterPosition } from \"../../utils\";\nexport var zoomIn = function (contextInstance) {\n    return function (step, animationTime, animationType) {\n        if (step === void 0) { step = 0.5; }\n        if (animationTime === void 0) { animationTime = 300; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        handleZoomToViewCenter(contextInstance, 1, step, animationTime, animationType);\n    };\n};\nexport var zoomOut = function (contextInstance) {\n    return function (step, animationTime, animationType) {\n        if (step === void 0) { step = 0.5; }\n        if (animationTime === void 0) { animationTime = 300; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        handleZoomToViewCenter(contextInstance, -1, step, animationTime, animationType);\n    };\n};\nexport var setTransform = function (contextInstance) {\n    return function (newPositionX, newPositionY, newScale, animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 300; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale;\n        var wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n        var disabled = contextInstance.setup.disabled;\n        if (disabled || !wrapperComponent || !contentComponent)\n            return;\n        var targetState = {\n            positionX: Number.isNaN(newPositionX) ? positionX : newPositionX,\n            positionY: Number.isNaN(newPositionY) ? positionY : newPositionY,\n            scale: Number.isNaN(newScale) ? scale : newScale,\n        };\n        animate(contextInstance, targetState, animationTime, animationType);\n    };\n};\nexport var resetTransform = function (contextInstance) {\n    return function (animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 200; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        resetTransformations(contextInstance, animationTime, animationType);\n    };\n};\nexport var centerView = function (contextInstance) {\n    return function (scale, animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 200; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        var transformState = contextInstance.transformState, wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n        if (wrapperComponent && contentComponent) {\n            var targetState = getCenterPosition(scale || transformState.scale, wrapperComponent, contentComponent);\n            animate(contextInstance, targetState, animationTime, animationType);\n        }\n    };\n};\nexport var zoomToElement = function (contextInstance) {\n    return function (node, scale, animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 600; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        handleCancelAnimation(contextInstance);\n        var wrapperComponent = contextInstance.wrapperComponent;\n        var target = typeof node === \"string\" ? document.getElementById(node) : node;\n        if (wrapperComponent && target && wrapperComponent.contains(target)) {\n            var targetState = calculateZoomToNode(contextInstance, target, scale);\n            animate(contextInstance, targetState, animationTime, animationType);\n        }\n    };\n};\n","import { zoomIn, zoomOut, setTransform, resetTransform, zoomToElement, centerView, } from \"../core/handlers/handlers.logic\";\nexport var getControls = function (contextInstance) {\n    return {\n        instance: contextInstance,\n        zoomIn: zoomIn(contextInstance),\n        zoomOut: zoomOut(contextInstance),\n        setTransform: setTransform(contextInstance),\n        resetTransform: resetTransform(contextInstance),\n        centerView: centerView(contextInstance),\n        zoomToElement: zoomToElement(contextInstance),\n    };\n};\nexport var getState = function (contextInstance) {\n    return {\n        instance: contextInstance,\n        state: contextInstance.transformState,\n    };\n};\nexport var getContext = function (contextInstance) {\n    var ref = {};\n    Object.assign(ref, getState(contextInstance));\n    Object.assign(ref, getControls(contextInstance));\n    return ref;\n};\n","// We want to make event listeners non-passive, and to do so have to check\n// that browsers support EventListenerOptions in the first place.\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\nvar passiveSupported = false;\nexport function makePassiveEventOption() {\n    try {\n        var options = {\n            get passive() {\n                // This function will be called when the browser\n                //   attempts to access the passive property.\n                passiveSupported = true;\n                return false;\n            },\n        };\n        return options;\n    }\n    catch (err) {\n        passiveSupported = false;\n        return passiveSupported;\n    }\n}\n","export var isExcludedNode = function (node, excluded) {\n    var targetTagName = node.tagName.toUpperCase();\n    var isExcludedTag = excluded.find(function (tag) { return tag.toUpperCase() === targetTagName; });\n    if (isExcludedTag)\n        return true;\n    var isExcludedClassName = excluded.find(function (className) {\n        return node.classList.contains(className);\n    });\n    if (isExcludedClassName)\n        return true;\n    return false;\n};\nexport var cancelTimeout = function (timeout) {\n    if (timeout) {\n        clearTimeout(timeout);\n    }\n};\n","export var getTransformStyles = function (x, y, scale) {\n    // Standard translate prevents blurry svg on the safari\n    return \"translate(\".concat(x, \"px, \").concat(y, \"px) scale(\").concat(scale, \")\");\n};\nexport var getMatrixTransformStyles = function (x, y, scale) {\n    // The shorthand for matrix does not work for Safari hence the need to explicitly use matrix3d\n    // Refer to https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/matrix\n    var a = scale;\n    var b = 0;\n    var c = 0;\n    var d = scale;\n    var tx = x;\n    var ty = y;\n    return \"matrix3d(\".concat(a, \", \").concat(b, \", 0, 0, \").concat(c, \", \").concat(d, \", 0, 0, 0, 0, 1, 0, \").concat(tx, \", \").concat(ty, \", 0, 1)\");\n};\nexport var getCenterPosition = function (scale, wrapperComponent, contentComponent) {\n    var contentWidth = contentComponent.offsetWidth * scale;\n    var contentHeight = contentComponent.offsetHeight * scale;\n    var centerPositionX = (wrapperComponent.offsetWidth - contentWidth) / 2;\n    var centerPositionY = (wrapperComponent.offsetHeight - contentHeight) / 2;\n    return {\n        scale: scale,\n        positionX: centerPositionX,\n        positionY: centerPositionY,\n    };\n};\n","import { checkIsNumber, isExcludedNode, roundNumber } from \"../../utils\";\nimport { checkZoomBounds } from \"../zoom/zoom.utils\";\nexport var isWheelAllowed = function (contextInstance, event) {\n    var _a = contextInstance.setup.wheel, disabled = _a.disabled, wheelDisabled = _a.wheelDisabled, touchPadDisabled = _a.touchPadDisabled, excluded = _a.excluded;\n    var isInitialized = contextInstance.isInitialized, isPanning = contextInstance.isPanning;\n    var target = event.target;\n    var isAllowed = isInitialized && !isPanning && !disabled && target;\n    if (!isAllowed)\n        return false;\n    // Event ctrlKey detects if touchpad action is executing wheel or pinch gesture\n    if (wheelDisabled && !event.ctrlKey)\n        return false;\n    if (touchPadDisabled && event.ctrlKey)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\nexport var getDeltaY = function (event) {\n    if (event) {\n        return event.deltaY < 0 ? 1 : -1;\n    }\n    return 0;\n};\nexport function getDelta(event, customDelta) {\n    var deltaY = getDeltaY(event);\n    var delta = checkIsNumber(customDelta, deltaY);\n    return delta;\n}\nexport function getMousePosition(event, contentComponent, scale) {\n    var contentRect = contentComponent.getBoundingClientRect();\n    var mouseX = 0;\n    var mouseY = 0;\n    if (\"clientX\" in event) {\n        // mouse position x, y over wrapper component\n        mouseX = (event.clientX - contentRect.left) / scale;\n        mouseY = (event.clientY - contentRect.top) / scale;\n    }\n    else {\n        var touch = event.touches[0];\n        mouseX = (touch.clientX - contentRect.left) / scale;\n        mouseY = (touch.clientY - contentRect.top) / scale;\n    }\n    if (Number.isNaN(mouseX) || Number.isNaN(mouseY))\n        console.error(\"No mouse or touch offset found\");\n    return {\n        x: mouseX,\n        y: mouseY,\n    };\n}\nexport var handleCalculateWheelZoom = function (contextInstance, delta, step, disable, getTarget) {\n    var scale = contextInstance.transformState.scale;\n    var wrapperComponent = contextInstance.wrapperComponent, setup = contextInstance.setup;\n    var maxScale = setup.maxScale, minScale = setup.minScale, zoomAnimation = setup.zoomAnimation, disablePadding = setup.disablePadding;\n    var size = zoomAnimation.size, disabled = zoomAnimation.disabled;\n    if (!wrapperComponent) {\n        throw new Error(\"Wrapper is not mounted\");\n    }\n    var targetScale = scale + delta * (scale - scale * step) * step;\n    if (getTarget)\n        return targetScale;\n    var paddingEnabled = disable ? false : !disabled;\n    var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, paddingEnabled && !disablePadding);\n    return newScale;\n};\nexport var handleWheelZoomStop = function (contextInstance, event) {\n    var previousWheelEvent = contextInstance.previousWheelEvent;\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup, maxScale = _a.maxScale, minScale = _a.minScale;\n    if (!previousWheelEvent)\n        return false;\n    if (scale < maxScale || scale > minScale)\n        return true;\n    if (Math.sign(previousWheelEvent.deltaY) !== Math.sign(event.deltaY))\n        return true;\n    if (previousWheelEvent.deltaY > 0 && previousWheelEvent.deltaY < event.deltaY)\n        return true;\n    if (previousWheelEvent.deltaY < 0 && previousWheelEvent.deltaY > event.deltaY)\n        return true;\n    if (Math.sign(previousWheelEvent.deltaY) !== Math.sign(event.deltaY))\n        return true;\n    return false;\n};\n","import { isExcludedNode, roundNumber } from \"../../utils\";\nimport { checkZoomBounds } from \"../zoom/zoom.utils\";\nexport var isPinchStartAllowed = function (contextInstance, event) {\n    var _a = contextInstance.setup.pinch, disabled = _a.disabled, excluded = _a.excluded;\n    var isInitialized = contextInstance.isInitialized;\n    var target = event.target;\n    var isAllowed = isInitialized && !disabled && target;\n    if (!isAllowed)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\nexport var isPinchAllowed = function (contextInstance) {\n    var disabled = contextInstance.setup.pinch.disabled;\n    var isInitialized = contextInstance.isInitialized, pinchStartDistance = contextInstance.pinchStartDistance;\n    var isAllowed = isInitialized && !disabled && pinchStartDistance;\n    if (!isAllowed)\n        return false;\n    return true;\n};\nexport var calculateTouchMidPoint = function (event, scale, contentComponent) {\n    var contentRect = contentComponent.getBoundingClientRect();\n    var touches = event.touches;\n    var firstPointX = roundNumber(touches[0].clientX - contentRect.left, 5);\n    var firstPointY = roundNumber(touches[0].clientY - contentRect.top, 5);\n    var secondPointX = roundNumber(touches[1].clientX - contentRect.left, 5);\n    var secondPointY = roundNumber(touches[1].clientY - contentRect.top, 5);\n    return {\n        x: (firstPointX + secondPointX) / 2 / scale,\n        y: (firstPointY + secondPointY) / 2 / scale,\n    };\n};\nexport var getTouchDistance = function (event) {\n    return Math.sqrt(Math.pow((event.touches[0].pageX - event.touches[1].pageX), 2) +\n        Math.pow((event.touches[0].pageY - event.touches[1].pageY), 2));\n};\nexport var calculatePinchZoom = function (contextInstance, currentDistance) {\n    var pinchStartScale = contextInstance.pinchStartScale, pinchStartDistance = contextInstance.pinchStartDistance, setup = contextInstance.setup;\n    var maxScale = setup.maxScale, minScale = setup.minScale, zoomAnimation = setup.zoomAnimation, disablePadding = setup.disablePadding;\n    var size = zoomAnimation.size, disabled = zoomAnimation.disabled;\n    if (!pinchStartScale || pinchStartDistance === null || !currentDistance) {\n        throw new Error(\"Pinch touches distance was not provided\");\n    }\n    if (currentDistance < 0) {\n        return contextInstance.transformState.scale;\n    }\n    var touchProportion = currentDistance / pinchStartDistance;\n    var scaleDifference = touchProportion * pinchStartScale;\n    return checkZoomBounds(roundNumber(scaleDifference, 2), minScale, maxScale, size, !disabled && !disablePadding);\n};\n","import { handleCallback } from \"../../utils/callback.utils\";\nimport { getContext } from \"../../utils/context.utils\";\nimport { cancelTimeout } from \"../../utils/helpers.utils\";\nimport { handleCancelAnimation } from \"../animations/animations.utils\";\nimport { handleCalculateBounds } from \"../bounds/bounds.utils\";\nimport { getDelta, handleCalculateWheelZoom, handleWheelZoomStop, getMousePosition, } from \"./wheel.utils\";\nimport { handleAlignToScaleBounds } from \"../zoom/zoom.logic\";\nimport { handleCalculateZoomPositions } from \"../zoom/zoom.utils\";\nvar wheelStopEventTime = 160;\nvar wheelAnimationTime = 100;\nexport var handleWheelStart = function (contextInstance, event) {\n    var _a = contextInstance.props, onWheelStart = _a.onWheelStart, onZoomStart = _a.onZoomStart;\n    if (!contextInstance.wheelStopEventTimer) {\n        handleCancelAnimation(contextInstance);\n        handleCallback(getContext(contextInstance), event, onWheelStart);\n        handleCallback(getContext(contextInstance), event, onZoomStart);\n    }\n};\nexport var handleWheelZoom = function (contextInstance, event) {\n    var _a = contextInstance.props, onWheel = _a.onWheel, onZoom = _a.onZoom;\n    var contentComponent = contextInstance.contentComponent, setup = contextInstance.setup, transformState = contextInstance.transformState;\n    var scale = transformState.scale;\n    var limitToBounds = setup.limitToBounds, centerZoomedOut = setup.centerZoomedOut, zoomAnimation = setup.zoomAnimation, wheel = setup.wheel, disablePadding = setup.disablePadding;\n    var size = zoomAnimation.size, disabled = zoomAnimation.disabled;\n    var step = wheel.step;\n    if (!contentComponent) {\n        throw new Error(\"Component not mounted\");\n    }\n    event.preventDefault();\n    event.stopPropagation();\n    var delta = getDelta(event, null);\n    var newScale = handleCalculateWheelZoom(contextInstance, delta, step, !event.ctrlKey);\n    // if scale not change\n    if (scale === newScale)\n        return;\n    var bounds = handleCalculateBounds(contextInstance, newScale);\n    var mousePosition = getMousePosition(event, contentComponent, scale);\n    var isPaddingDisabled = disabled || size === 0 || centerZoomedOut || disablePadding;\n    var isLimitedToBounds = limitToBounds && isPaddingDisabled;\n    var _b = handleCalculateZoomPositions(contextInstance, mousePosition.x, mousePosition.y, newScale, bounds, isLimitedToBounds), x = _b.x, y = _b.y;\n    contextInstance.previousWheelEvent = event;\n    contextInstance.setTransformState(newScale, x, y);\n    handleCallback(getContext(contextInstance), event, onWheel);\n    handleCallback(getContext(contextInstance), event, onZoom);\n};\nexport var handleWheelStop = function (contextInstance, event) {\n    var _a = contextInstance.props, onWheelStop = _a.onWheelStop, onZoomStop = _a.onZoomStop;\n    // fire animation\n    cancelTimeout(contextInstance.wheelAnimationTimer);\n    contextInstance.wheelAnimationTimer = setTimeout(function () {\n        if (!contextInstance.mounted)\n            return;\n        handleAlignToScaleBounds(contextInstance, event.x, event.y);\n        contextInstance.wheelAnimationTimer = null;\n    }, wheelAnimationTime);\n    // Wheel stop event\n    var hasStoppedZooming = handleWheelZoomStop(contextInstance, event);\n    if (hasStoppedZooming) {\n        cancelTimeout(contextInstance.wheelStopEventTimer);\n        contextInstance.wheelStopEventTimer = setTimeout(function () {\n            if (!contextInstance.mounted)\n                return;\n            contextInstance.wheelStopEventTimer = null;\n            handleCallback(getContext(contextInstance), event, onWheelStop);\n            handleCallback(getContext(contextInstance), event, onZoomStop);\n        }, wheelStopEventTime);\n    }\n};\n","import { handleCancelAnimation } from \"../animations/animations.utils\";\nimport { handleAlignToScaleBounds } from \"../zoom/zoom.logic\";\nimport { calculatePinchZoom, calculateTouchMidPoint, getTouchDistance, } from \"./pinch.utils\";\nimport { handleCalculateBounds } from \"../bounds/bounds.utils\";\nimport { handleCalculateZoomPositions } from \"../zoom/zoom.utils\";\nexport var handlePinchStart = function (contextInstance, event) {\n    var distance = getTouchDistance(event);\n    contextInstance.pinchStartDistance = distance;\n    contextInstance.lastDistance = distance;\n    contextInstance.pinchStartScale = contextInstance.transformState.scale;\n    contextInstance.isPanning = false;\n    handleCancelAnimation(contextInstance);\n};\nexport var handlePinchZoom = function (contextInstance, event) {\n    var contentComponent = contextInstance.contentComponent, pinchStartDistance = contextInstance.pinchStartDistance;\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup, limitToBounds = _a.limitToBounds, centerZoomedOut = _a.centerZoomedOut, zoomAnimation = _a.zoomAnimation;\n    var disabled = zoomAnimation.disabled, size = zoomAnimation.size;\n    // if one finger starts from outside of wrapper\n    if (pinchStartDistance === null || !contentComponent)\n        return;\n    var midPoint = calculateTouchMidPoint(event, scale, contentComponent);\n    // if touches goes off of the wrapper element\n    if (!Number.isFinite(midPoint.x) || !Number.isFinite(midPoint.y))\n        return;\n    var currentDistance = getTouchDistance(event);\n    var newScale = calculatePinchZoom(contextInstance, currentDistance);\n    if (newScale === scale)\n        return;\n    var bounds = handleCalculateBounds(contextInstance, newScale);\n    var isPaddingDisabled = disabled || size === 0 || centerZoomedOut;\n    var isLimitedToBounds = limitToBounds && isPaddingDisabled;\n    var _b = handleCalculateZoomPositions(contextInstance, midPoint.x, midPoint.y, newScale, bounds, isLimitedToBounds), x = _b.x, y = _b.y;\n    contextInstance.pinchMidpoint = midPoint;\n    contextInstance.lastDistance = currentDistance;\n    contextInstance.setTransformState(newScale, x, y);\n};\nexport var handlePinchStop = function (contextInstance) {\n    var pinchMidpoint = contextInstance.pinchMidpoint;\n    contextInstance.velocity = null;\n    contextInstance.lastDistance = null;\n    contextInstance.pinchMidpoint = null;\n    contextInstance.pinchStartScale = null;\n    contextInstance.pinchStartDistance = null;\n    handleAlignToScaleBounds(contextInstance, pinchMidpoint === null || pinchMidpoint === void 0 ? void 0 : pinchMidpoint.x, pinchMidpoint === null || pinchMidpoint === void 0 ? void 0 : pinchMidpoint.y);\n};\n","import { animate } from \"../animations/animations.utils\";\nimport { getMousePosition } from \"../wheel/wheel.utils\";\nimport { handleZoomToPoint } from \"../zoom/zoom.logic\";\nimport { cancelTimeout, getContext, handleCallback, isExcludedNode, } from \"../../utils\";\nimport { handleCalculateButtonZoom, resetTransformations, } from \"../handlers/handlers.utils\";\nexport var handleDoubleClickStop = function (contextInstance, event) {\n    var onZoomStop = contextInstance.props.onZoomStop;\n    var animationTime = contextInstance.setup.doubleClick.animationTime;\n    cancelTimeout(contextInstance.doubleClickStopEventTimer);\n    contextInstance.doubleClickStopEventTimer = setTimeout(function () {\n        contextInstance.doubleClickStopEventTimer = null;\n        handleCallback(getContext(contextInstance), event, onZoomStop);\n    }, animationTime);\n};\nexport var handleDoubleClickResetMode = function (contextInstance, event) {\n    var _a = contextInstance.props, onZoomStart = _a.onZoomStart, onZoom = _a.onZoom;\n    var _b = contextInstance.setup.doubleClick, animationTime = _b.animationTime, animationType = _b.animationType;\n    handleCallback(getContext(contextInstance), event, onZoomStart);\n    resetTransformations(contextInstance, animationTime, animationType, function () {\n        return handleCallback(getContext(contextInstance), event, onZoom);\n    });\n    handleDoubleClickStop(contextInstance, event);\n};\nexport function handleDoubleClick(contextInstance, event) {\n    var setup = contextInstance.setup, doubleClickStopEventTimer = contextInstance.doubleClickStopEventTimer, transformState = contextInstance.transformState, contentComponent = contextInstance.contentComponent;\n    var scale = transformState.scale;\n    var _a = contextInstance.props, onZoomStart = _a.onZoomStart, onZoom = _a.onZoom;\n    var _b = setup.doubleClick, disabled = _b.disabled, mode = _b.mode, step = _b.step, animationTime = _b.animationTime, animationType = _b.animationType;\n    if (disabled)\n        return;\n    if (doubleClickStopEventTimer)\n        return;\n    if (mode === \"reset\") {\n        return handleDoubleClickResetMode(contextInstance, event);\n    }\n    if (!contentComponent)\n        return console.error(\"No ContentComponent found\");\n    var delta = mode === \"zoomOut\" ? -1 : 1;\n    var newScale = handleCalculateButtonZoom(contextInstance, delta, step);\n    // stop execution when scale didn't change\n    if (scale === newScale)\n        return;\n    handleCallback(getContext(contextInstance), event, onZoomStart);\n    var mousePosition = getMousePosition(event, contentComponent, scale);\n    var targetState = handleZoomToPoint(contextInstance, newScale, mousePosition.x, mousePosition.y);\n    if (!targetState) {\n        return console.error(\"Error during zoom event. New transformation state was not calculated.\");\n    }\n    handleCallback(getContext(contextInstance), event, onZoom);\n    animate(contextInstance, targetState, animationTime, animationType);\n    handleDoubleClickStop(contextInstance, event);\n}\nexport var isDoubleClickAllowed = function (contextInstance, event) {\n    var isInitialized = contextInstance.isInitialized, setup = contextInstance.setup, wrapperComponent = contextInstance.wrapperComponent;\n    var _a = setup.doubleClick, disabled = _a.disabled, excluded = _a.excluded;\n    var target = event.target;\n    var isWrapperChild = wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(target);\n    var isAllowed = isInitialized && target && isWrapperChild && !disabled;\n    if (!isAllowed)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\n","import { getContext, createSetup, createState, handleCallback, getTransformStyles, makePassiveEventOption, getCenterPosition, } from \"../utils\";\nimport { handleCancelAnimation } from \"./animations/animations.utils\";\nimport { isWheelAllowed } from \"./wheel/wheel.utils\";\nimport { isPinchAllowed, isPinchStartAllowed } from \"./pinch/pinch.utils\";\nimport { handleCalculateBounds } from \"./bounds/bounds.utils\";\nimport { handleWheelStart, handleWheelZoom, handleWheelStop, } from \"./wheel/wheel.logic\";\nimport { isPanningAllowed, isPanningStartAllowed } from \"./pan/panning.utils\";\nimport { handlePanning, handlePanningEnd, handlePanningStart, } from \"./pan/panning.logic\";\nimport { handlePinchStart, handlePinchStop, handlePinchZoom, } from \"./pinch/pinch.logic\";\nimport { handleDoubleClick, isDoubleClickAllowed, } from \"./double-click/double-click.logic\";\nvar ZoomPanPinch = /** @class */ (function () {\n    function ZoomPanPinch(props) {\n        var _this = this;\n        this.mounted = true;\n        this.onChangeCallbacks = new Set();\n        this.onInitCallbacks = new Set();\n        // Components\n        this.wrapperComponent = null;\n        this.contentComponent = null;\n        // Initialization\n        this.isInitialized = false;\n        this.bounds = null;\n        // wheel helpers\n        this.previousWheelEvent = null;\n        this.wheelStopEventTimer = null;\n        this.wheelAnimationTimer = null;\n        // panning helpers\n        this.isPanning = false;\n        this.startCoords = null;\n        this.lastTouch = null;\n        // pinch helpers\n        this.distance = null;\n        this.lastDistance = null;\n        this.pinchStartDistance = null;\n        this.pinchStartScale = null;\n        this.pinchMidpoint = null;\n        // double click helpers\n        this.doubleClickStopEventTimer = null;\n        // velocity helpers\n        this.velocity = null;\n        this.velocityTime = null;\n        this.lastMousePosition = null;\n        // animations helpers\n        this.animate = false;\n        this.animation = null;\n        this.maxBounds = null;\n        // key press\n        this.pressedKeys = {};\n        this.mount = function () {\n            _this.initializeWindowEvents();\n        };\n        this.unmount = function () {\n            _this.cleanupWindowEvents();\n        };\n        this.update = function (newProps) {\n            handleCalculateBounds(_this, _this.transformState.scale);\n            _this.setup = createSetup(newProps);\n        };\n        this.initializeWindowEvents = function () {\n            var _a;\n            var passive = makePassiveEventOption();\n            var currentDocument = (_a = _this.wrapperComponent) === null || _a === void 0 ? void 0 : _a.ownerDocument;\n            var currentWindow = currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.defaultView;\n            // Panning on window to allow panning when mouse is out of component wrapper\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mousedown\", _this.onPanningStart, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mousemove\", _this.onPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mouseup\", _this.onPanningStop, passive);\n            currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.addEventListener(\"mouseleave\", _this.clearPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"keyup\", _this.setKeyUnPressed, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"keydown\", _this.setKeyPressed, passive);\n        };\n        this.cleanupWindowEvents = function () {\n            var _a, _b;\n            var passive = makePassiveEventOption();\n            var currentDocument = (_a = _this.wrapperComponent) === null || _a === void 0 ? void 0 : _a.ownerDocument;\n            var currentWindow = currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.defaultView;\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mousedown\", _this.onPanningStart, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mousemove\", _this.onPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mouseup\", _this.onPanningStop, passive);\n            currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.removeEventListener(\"mouseleave\", _this.clearPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"keyup\", _this.setKeyUnPressed, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"keydown\", _this.setKeyPressed, passive);\n            document.removeEventListener(\"mouseleave\", _this.clearPanning, passive);\n            handleCancelAnimation(_this);\n            (_b = _this.observer) === null || _b === void 0 ? void 0 : _b.disconnect();\n        };\n        this.handleInitializeWrapperEvents = function (wrapper) {\n            // Zooming events on wrapper\n            var passive = makePassiveEventOption();\n            wrapper.addEventListener(\"wheel\", _this.onWheelZoom, passive);\n            wrapper.addEventListener(\"dblclick\", _this.onDoubleClick, passive);\n            wrapper.addEventListener(\"touchstart\", _this.onTouchPanningStart, passive);\n            wrapper.addEventListener(\"touchmove\", _this.onTouchPanning, passive);\n            wrapper.addEventListener(\"touchend\", _this.onTouchPanningStop, passive);\n        };\n        this.handleInitialize = function (contentComponent) {\n            var centerOnInit = _this.setup.centerOnInit;\n            _this.applyTransformation();\n            _this.onInitCallbacks.forEach(function (callback) { return callback(getContext(_this)); });\n            if (centerOnInit) {\n                _this.setCenter();\n                _this.observer = new ResizeObserver(function () {\n                    var _a;\n                    _this.onInitCallbacks.forEach(function (callback) { return callback(getContext(_this)); });\n                    _this.setCenter();\n                    (_a = _this.observer) === null || _a === void 0 ? void 0 : _a.disconnect();\n                });\n                // Start observing the target node for configured mutations\n                _this.observer.observe(contentComponent);\n            }\n        };\n        /// ///////\n        // Zoom\n        /// ///////\n        this.onWheelZoom = function (event) {\n            var disabled = _this.setup.disabled;\n            if (disabled)\n                return;\n            var isAllowed = isWheelAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            var keysPressed = _this.isPressingKeys(_this.setup.wheel.activationKeys);\n            if (!keysPressed)\n                return;\n            handleWheelStart(_this, event);\n            handleWheelZoom(_this, event);\n            handleWheelStop(_this, event);\n        };\n        /// ///////\n        // Pan\n        /// ///////\n        this.onPanningStart = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanningStart = _this.props.onPanningStart;\n            if (disabled)\n                return;\n            var isAllowed = isPanningStartAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            var keysPressed = _this.isPressingKeys(_this.setup.panning.activationKeys);\n            if (!keysPressed)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            handleCancelAnimation(_this);\n            handlePanningStart(_this, event);\n            handleCallback(getContext(_this), event, onPanningStart);\n        };\n        this.onPanning = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanning = _this.props.onPanning;\n            if (disabled)\n                return;\n            var isAllowed = isPanningAllowed(_this);\n            if (!isAllowed)\n                return;\n            var keysPressed = _this.isPressingKeys(_this.setup.panning.activationKeys);\n            if (!keysPressed)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            handlePanning(_this, event.clientX, event.clientY);\n            handleCallback(getContext(_this), event, onPanning);\n        };\n        this.onPanningStop = function (event) {\n            var onPanningStop = _this.props.onPanningStop;\n            if (_this.isPanning) {\n                handlePanningEnd(_this);\n                handleCallback(getContext(_this), event, onPanningStop);\n            }\n        };\n        /// ///////\n        // Pinch\n        /// ///////\n        this.onPinchStart = function (event) {\n            var disabled = _this.setup.disabled;\n            var _a = _this.props, onPinchingStart = _a.onPinchingStart, onZoomStart = _a.onZoomStart;\n            if (disabled)\n                return;\n            var isAllowed = isPinchStartAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            handlePinchStart(_this, event);\n            handleCancelAnimation(_this);\n            handleCallback(getContext(_this), event, onPinchingStart);\n            handleCallback(getContext(_this), event, onZoomStart);\n        };\n        this.onPinch = function (event) {\n            var disabled = _this.setup.disabled;\n            var _a = _this.props, onPinching = _a.onPinching, onZoom = _a.onZoom;\n            if (disabled)\n                return;\n            var isAllowed = isPinchAllowed(_this);\n            if (!isAllowed)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            handlePinchZoom(_this, event);\n            handleCallback(getContext(_this), event, onPinching);\n            handleCallback(getContext(_this), event, onZoom);\n        };\n        this.onPinchStop = function (event) {\n            var _a = _this.props, onPinchingStop = _a.onPinchingStop, onZoomStop = _a.onZoomStop;\n            if (_this.pinchStartScale) {\n                handlePinchStop(_this);\n                handleCallback(getContext(_this), event, onPinchingStop);\n                handleCallback(getContext(_this), event, onZoomStop);\n            }\n        };\n        /// ///////\n        // Touch\n        /// ///////\n        this.onTouchPanningStart = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanningStart = _this.props.onPanningStart;\n            if (disabled)\n                return;\n            var isAllowed = isPanningStartAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            var isDoubleTap = _this.lastTouch && +new Date() - _this.lastTouch < 200;\n            if (isDoubleTap && event.touches.length === 1) {\n                _this.onDoubleClick(event);\n            }\n            else {\n                _this.lastTouch = +new Date();\n                handleCancelAnimation(_this);\n                var touches = event.touches;\n                var isPanningAction = touches.length === 1;\n                var isPinchAction = touches.length === 2;\n                if (isPanningAction) {\n                    handleCancelAnimation(_this);\n                    handlePanningStart(_this, event);\n                    handleCallback(getContext(_this), event, onPanningStart);\n                }\n                if (isPinchAction) {\n                    _this.onPinchStart(event);\n                }\n            }\n        };\n        this.onTouchPanning = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanning = _this.props.onPanning;\n            if (_this.isPanning && event.touches.length === 1) {\n                if (disabled)\n                    return;\n                var isAllowed = isPanningAllowed(_this);\n                if (!isAllowed)\n                    return;\n                event.preventDefault();\n                event.stopPropagation();\n                var touch = event.touches[0];\n                handlePanning(_this, touch.clientX, touch.clientY);\n                handleCallback(getContext(_this), event, onPanning);\n            }\n            else if (event.touches.length > 1) {\n                _this.onPinch(event);\n            }\n        };\n        this.onTouchPanningStop = function (event) {\n            _this.onPanningStop(event);\n            _this.onPinchStop(event);\n        };\n        /// ///////\n        // Double Click\n        /// ///////\n        this.onDoubleClick = function (event) {\n            var disabled = _this.setup.disabled;\n            if (disabled)\n                return;\n            var isAllowed = isDoubleClickAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            handleDoubleClick(_this, event);\n        };\n        /// ///////\n        // Helpers\n        /// ///////\n        this.clearPanning = function (event) {\n            if (_this.isPanning) {\n                _this.onPanningStop(event);\n            }\n        };\n        this.setKeyPressed = function (e) {\n            _this.pressedKeys[e.key] = true;\n        };\n        this.setKeyUnPressed = function (e) {\n            _this.pressedKeys[e.key] = false;\n        };\n        this.isPressingKeys = function (keys) {\n            if (!keys.length) {\n                return true;\n            }\n            return Boolean(keys.find(function (key) { return _this.pressedKeys[key]; }));\n        };\n        this.setTransformState = function (scale, positionX, positionY) {\n            var onTransformed = _this.props.onTransformed;\n            if (!Number.isNaN(scale) &&\n                !Number.isNaN(positionX) &&\n                !Number.isNaN(positionY)) {\n                if (scale !== _this.transformState.scale) {\n                    _this.transformState.previousScale = _this.transformState.scale;\n                    _this.transformState.scale = scale;\n                }\n                _this.transformState.positionX = positionX;\n                _this.transformState.positionY = positionY;\n                _this.applyTransformation();\n                var ctx_1 = getContext(_this);\n                _this.onChangeCallbacks.forEach(function (callback) { return callback(ctx_1); });\n                handleCallback(ctx_1, { scale: scale, positionX: positionX, positionY: positionY }, onTransformed);\n            }\n            else {\n                console.error(\"Detected NaN set state values\");\n            }\n        };\n        this.setCenter = function () {\n            if (_this.wrapperComponent && _this.contentComponent) {\n                var targetState = getCenterPosition(_this.transformState.scale, _this.wrapperComponent, _this.contentComponent);\n                _this.setTransformState(targetState.scale, targetState.positionX, targetState.positionY);\n            }\n        };\n        this.handleTransformStyles = function (x, y, scale) {\n            if (_this.props.customTransform) {\n                return _this.props.customTransform(x, y, scale);\n            }\n            return getTransformStyles(x, y, scale);\n        };\n        this.applyTransformation = function () {\n            if (!_this.mounted || !_this.contentComponent)\n                return;\n            var _a = _this.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n            var transform = _this.handleTransformStyles(positionX, positionY, scale);\n            _this.contentComponent.style.transform = transform;\n        };\n        this.getContext = function () {\n            return getContext(_this);\n        };\n        /**\n         * Hooks\n         */\n        this.onChange = function (callback) {\n            if (!_this.onChangeCallbacks.has(callback)) {\n                _this.onChangeCallbacks.add(callback);\n            }\n            return function () {\n                _this.onChangeCallbacks.delete(callback);\n            };\n        };\n        this.onInit = function (callback) {\n            if (!_this.onInitCallbacks.has(callback)) {\n                _this.onInitCallbacks.add(callback);\n            }\n            return function () {\n                _this.onInitCallbacks.delete(callback);\n            };\n        };\n        /**\n         * Initialization\n         */\n        this.init = function (wrapperComponent, contentComponent) {\n            _this.cleanupWindowEvents();\n            _this.wrapperComponent = wrapperComponent;\n            _this.contentComponent = contentComponent;\n            handleCalculateBounds(_this, _this.transformState.scale);\n            _this.handleInitializeWrapperEvents(wrapperComponent);\n            _this.handleInitialize(contentComponent);\n            _this.initializeWindowEvents();\n            _this.isInitialized = true;\n            var ctx = getContext(_this);\n            handleCallback(ctx, undefined, _this.props.onInit);\n        };\n        this.props = props;\n        this.setup = createSetup(this.props);\n        this.transformState = createState(this.props);\n    }\n    return ZoomPanPinch;\n}());\nexport { ZoomPanPinch };\n","import React, { useEffect, useImperativeHandle, useRef } from \"react\";\nimport { ZoomPanPinch } from \"../../core/instance.core\";\nimport { getControls } from \"../../utils\";\nexport var Context = React.createContext(null);\nvar getContent = function (children, ctx) {\n    if (typeof children === \"function\") {\n        return children(ctx);\n    }\n    return children;\n};\nexport var TransformWrapper = React.forwardRef(function (props, ref) {\n    var instance = useRef(new ZoomPanPinch(props)).current;\n    var content = getContent(props.children, getControls(instance));\n    useImperativeHandle(ref, function () { return getControls(instance); }, [instance]);\n    useEffect(function () {\n        instance.update(props);\n    }, [instance, props]);\n    return React.createElement(Context.Provider, { value: instance }, content);\n});\n","import { __assign } from \"tslib\";\nimport React, { useContext, useEffect, useRef } from \"react\";\nimport { mergeRefs } from \"utils/ref.utils\";\nimport { Context } from \"../transform-wrapper/transform-wrapper\";\nexport var KeepScale = React.forwardRef(function (props, ref) {\n    var localRef = useRef(null);\n    var instance = useContext(Context);\n    useEffect(function () {\n        return instance.onChange(function (ctx) {\n            if (localRef.current) {\n                var positionX = 0;\n                var positionY = 0;\n                localRef.current.style.transform = instance.handleTransformStyles(positionX, positionY, 1 / ctx.instance.transformState.scale);\n            }\n        });\n    }, [instance]);\n    return React.createElement(\"div\", __assign({}, props, { ref: mergeRefs([localRef, ref]) }));\n});\n","export function mergeRefs(refs) {\n    return function (value) {\n        refs.forEach(function (ref) {\n            if (typeof ref === \"function\") {\n                ref(value);\n            }\n            else if (ref != null) {\n                ref.current = value;\n            }\n        });\n    };\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { __assign } from \"tslib\";\n/* eslint-disable react/require-default-props */\nimport React, { useContext, useEffect, useRef } from \"react\";\nimport { Context } from \"../transform-wrapper/transform-wrapper\";\nimport styles from \"./transform-component.module.css\";\nexport var TransformComponent = function (_a) {\n    var children = _a.children, _b = _a.wrapperClass, wrapperClass = _b === void 0 ? \"\" : _b, _c = _a.contentClass, contentClass = _c === void 0 ? \"\" : _c, wrapperStyle = _a.wrapperStyle, contentStyle = _a.contentStyle, _d = _a.wrapperProps, wrapperProps = _d === void 0 ? {} : _d, _e = _a.contentProps, contentProps = _e === void 0 ? {} : _e;\n    var init = useContext(Context).init;\n    var wrapperRef = useRef(null);\n    var contentRef = useRef(null);\n    useEffect(function () {\n        var wrapper = wrapperRef.current;\n        var content = contentRef.current;\n        if (wrapper !== null && content !== null && init) {\n            init(wrapper, content);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    return (React.createElement(\"div\", __assign({}, wrapperProps, { ref: wrapperRef, className: \"react-transform-wrapper \".concat(styles.wrapper, \" \").concat(wrapperClass), style: wrapperStyle }),\n        React.createElement(\"div\", __assign({}, contentProps, { ref: contentRef, className: \"react-transform-component \".concat(styles.content, \" \").concat(contentClass), style: contentStyle }), children)));\n};\n","export default function(x) {\n  return x;\n}\n","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\n\nexport default function(topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => x;\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","export default function PathString() {\n  this._string = [];\n}\n\nPathString.prototype = {\n  _radius: 4.5,\n  _circle: circle(4.5),\n  pointRadius: function(_) {\n    if ((_ = +_) !== this._radius) this._radius = _, this._circle = null;\n    return this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._string.push(\"Z\");\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._string.push(\"M\", x, \",\", y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._string.push(\"L\", x, \",\", y);\n        break;\n      }\n      default: {\n        if (this._circle == null) this._circle = circle(this._radius);\n        this._string.push(\"M\", x, \",\", y, this._circle);\n        break;\n      }\n    }\n  },\n  result: function() {\n    if (this._string.length) {\n      var result = this._string.join(\"\");\n      this._string = [];\n      return result;\n    } else {\n      return null;\n    }\n  }\n};\n\nfunction circle(radius) {\n  return \"m0,\" + radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius\n      + \"z\";\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  var pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    return arguments.length ? (projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream, path) : projection;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  return path.projection(projection).context(context);\n}\n","import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","import {Adder} from \"d3-array\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, epsilon2, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nfunction longitude(point) {\n  return abs(point[0]) <= pi ? point[0] : sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  var sum = new Adder();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon2) ^ (winding & 1);\n}\n","function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n","import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0, 0], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(6),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygons polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  return [abs(lambda) > pi ? lambda + Math.round(-lambda / tau) * tau : lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    return lambda += deltaLambda, [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n","import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  if (!alpha) return scaleTranslate(k, dx, dy, sx, sy);\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = scaleTranslateRotate(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 6 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1  n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","import {abs, asin, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {cylindricalEqualAreaRaw} from \"./cylindricalEqualArea.js\";\n\nexport function conicEqualAreaRaw(y0, y1) {\n  var sy0 = sin(y0), n = (sy0 + sin(y1)) / 2;\n\n  // Are the parallels symmetrical around the Equator?\n  if (abs(n) < epsilon) return cylindricalEqualAreaRaw(y0);\n\n  var c = 1 + sy0 * (2 * n - sy0), r0 = sqrt(c) / n;\n\n  function project(x, y) {\n    var r = sqrt(c - 2 * n * sin(y)) / n;\n    return [r * sin(x *= n), r0 - r * cos(x)];\n  }\n\n  project.invert = function(x, y) {\n    var r0y = r0 - y,\n        l = atan2(x, abs(r0y)) * sign(r0y);\n    if (r0y * n < 0)\n      l -= pi * sign(x) * sign(r0y);\n    return [l / n, asin((c - (x * x + r0y * r0y) * n * n) / (2 * n))];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEqualAreaRaw)\n      .scale(155.424)\n      .center([0, 33.6442]);\n}\n","import {asin, cos, sin} from \"../math.js\";\n\nexport function cylindricalEqualAreaRaw(phi0) {\n  var cosPhi0 = cos(phi0);\n\n  function forward(lambda, phi) {\n    return [lambda * cosPhi0, sin(phi) / cosPhi0];\n  }\n\n  forward.invert = function(x, y) {\n    return [x / cosPhi0, asin(y * cosPhi0)];\n  };\n\n  return forward;\n}\n","import {degrees, pi, radians} from \"../math.js\";\nimport {projectionMutator} from \"./index.js\";\n\nexport function conicProjection(projectAt) {\n  var phi0 = 0,\n      phi1 = pi / 3,\n      m = projectionMutator(projectAt),\n      p = m(phi0, phi1);\n\n  p.parallels = function(_) {\n    return arguments.length ? m(phi0 = _[0] * radians, phi1 = _[1] * radians) : [phi0 * degrees, phi1 * degrees];\n  };\n\n  return p;\n}\n","import {epsilon} from \"../math.js\";\nimport albers from \"./albers.js\";\nimport conicEqualArea from \"./conicEqualArea.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\n\n// The projections must have mutually exclusive clip regions on the sphere,\n// as this will avoid emitting interleaving lines and polygons.\nfunction multiplex(streams) {\n  var n = streams.length;\n  return {\n    point: function(x, y) { var i = -1; while (++i < n) streams[i].point(x, y); },\n    sphere: function() { var i = -1; while (++i < n) streams[i].sphere(); },\n    lineStart: function() { var i = -1; while (++i < n) streams[i].lineStart(); },\n    lineEnd: function() { var i = -1; while (++i < n) streams[i].lineEnd(); },\n    polygonStart: function() { var i = -1; while (++i < n) streams[i].polygonStart(); },\n    polygonEnd: function() { var i = -1; while (++i < n) streams[i].polygonEnd(); }\n  };\n}\n\n// A composite projection for the United States, configured by default for\n// 960500. The projection also works quite well at 960600 if you change the\n// scale to 1285 and adjust the translate accordingly. The set of standard\n// parallels for each region comes from USGS, which is published here:\n// http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html#albers\nexport default function() {\n  var cache,\n      cacheStream,\n      lower48 = albers(), lower48Point,\n      alaska = conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), alaskaPoint, // EPSG:3338\n      hawaii = conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), hawaiiPoint, // ESRI:102007\n      point, pointStream = {point: function(x, y) { point = [x, y]; }};\n\n  function albersUsa(coordinates) {\n    var x = coordinates[0], y = coordinates[1];\n    return point = null,\n        (lower48Point.point(x, y), point)\n        || (alaskaPoint.point(x, y), point)\n        || (hawaiiPoint.point(x, y), point);\n  }\n\n  albersUsa.invert = function(coordinates) {\n    var k = lower48.scale(),\n        t = lower48.translate(),\n        x = (coordinates[0] - t[0]) / k,\n        y = (coordinates[1] - t[1]) / k;\n    return (y >= 0.120 && y < 0.234 && x >= -0.425 && x < -0.214 ? alaska\n        : y >= 0.166 && y < 0.234 && x >= -0.214 && x < -0.115 ? hawaii\n        : lower48).invert(coordinates);\n  };\n\n  albersUsa.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = multiplex([lower48.stream(cacheStream = stream), alaska.stream(stream), hawaii.stream(stream)]);\n  };\n\n  albersUsa.precision = function(_) {\n    if (!arguments.length) return lower48.precision();\n    lower48.precision(_), alaska.precision(_), hawaii.precision(_);\n    return reset();\n  };\n\n  albersUsa.scale = function(_) {\n    if (!arguments.length) return lower48.scale();\n    lower48.scale(_), alaska.scale(_ * 0.35), hawaii.scale(_);\n    return albersUsa.translate(lower48.translate());\n  };\n\n  albersUsa.translate = function(_) {\n    if (!arguments.length) return lower48.translate();\n    var k = lower48.scale(), x = +_[0], y = +_[1];\n\n    lower48Point = lower48\n        .translate(_)\n        .clipExtent([[x - 0.455 * k, y - 0.238 * k], [x + 0.455 * k, y + 0.238 * k]])\n        .stream(pointStream);\n\n    alaskaPoint = alaska\n        .translate([x - 0.307 * k, y + 0.201 * k])\n        .clipExtent([[x - 0.425 * k + epsilon, y + 0.120 * k + epsilon], [x - 0.214 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    hawaiiPoint = hawaii\n        .translate([x - 0.205 * k, y + 0.212 * k])\n        .clipExtent([[x - 0.214 * k + epsilon, y + 0.166 * k + epsilon], [x - 0.115 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    return reset();\n  };\n\n  albersUsa.fitExtent = function(extent, object) {\n    return fitExtent(albersUsa, extent, object);\n  };\n\n  albersUsa.fitSize = function(size, object) {\n    return fitSize(albersUsa, size, object);\n  };\n\n  albersUsa.fitWidth = function(width, object) {\n    return fitWidth(albersUsa, width, object);\n  };\n\n  albersUsa.fitHeight = function(height, object) {\n    return fitHeight(albersUsa, height, object);\n  };\n\n  function reset() {\n    cache = cacheStream = null;\n    return albersUsa;\n  }\n\n  return albersUsa.scale(1070);\n}\n","import conicEqualArea from \"./conicEqualArea.js\";\n\nexport default function() {\n  return conicEqualArea()\n      .parallels([29.5, 45.5])\n      .scale(1070)\n      .translate([480, 250])\n      .rotate([96, 0])\n      .center([-0.6, 38.7]);\n}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([array(selector)], root);\n}\n"],"names":["roundNumber","num","decimal","Number","toFixed","checkIsNumber","defaultValue","handleCallback","context","event","callback","animations","easeOut","t","Math","cos","PI","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","handleCancelAnimationFrame","animation","cancelAnimationFrame","handleCancelAnimation","contextInstance","mounted","animate","velocity","handleSetupAnimation","animationName","animationTime","startTime","Date","getTime","frameTime","animationProgress","step","animationType","requestAnimationFrame","targetState","isValid","scale","positionX","positionY","isNaN","isValidTargetState","setTransformState","_a","transformState","scaleDiff","positionXDiff","positionYDiff","calculateBounds","newScale","wrapperComponent","contentComponent","centerZoomedOut","setup","Error","wrapperWidth","offsetWidth","wrapperHeight","offsetHeight","newContentWidth","newContentHeight","newDiffWidth","newDiffHeight","getComponentsSizes","bounds","diffWidth","diffHeight","scaleWidthFactor","scaleHeightFactor","minPositionX","maxPositionX","minPositionY","maxPositionY","getBounds","Boolean","boundLimiter","value","minBound","maxBound","isActive","handleCalculateBounds","getMouseBoundedPosition","limitToBounds","paddingValueX","paddingValueY","paddingX","paddingY","x","y","handleCalculateZoomPositions","mouseX","mouseY","scaleDifference","console","error","checkZoomBounds","zoom","minScale","maxScale","zoomPadding","enablePadding","minScaleWithPadding","isPanningStartAllowed","excluded","panning","isInitialized","target","isWrapperChild","contains","isExcludedNode","isPanningAllowed","isPanning","disabled","handlePanningSetup","clientX","clientY","startCoords","handleTouchPanningSetup","touches","length","getPanningClientPosition","lockAxisX","lockAxisY","getPaddingValue","size","disablePadding","isVelocityCalculationAllowed","velocityAnimation","isVelocityAllowed","getVelocityPosition","newPosition","startPosition","currentPosition","isLocked","minPosition","maxPosition","minTarget","maxTarget","calculatedPosition","handleCalculateVelocity","position","lastMousePosition","velocityTime","equalToMove","now","sizeMultiplier","min","window","innerWidth","getSizeMultiplier","distanceX","distanceY","velocityX","velocityY","interval","speed","sqrt","total","handlePanningStart","undefined","TouchEvent","handleAlignToBounds","alignmentAnimation","sizeX","sizeY","_b","_c","xChanged","yChanged","_d","handlePanToBounds","handlePanning","newPositionX","newPositionY","handleNewPosition","handlePanningEnd","velocityDisabled","wrapperRect","getBoundingClientRect","contentRect","width","height","contentWidth","contentHeight","isZoomed","zoomAnimation","alignAnimationTime","velocityAlignmentTime","moveAnimationTime","sensitivity","getVelocityMoveTime","finalAnimationTime","max","maxTargetX","minTargetX","maxTargetY","minTargetY","startState","alignStep","alignAnimation","customStep","currentPositionX","currentPositionY","handleVelocityPanning","handleZoomToPoint","handleAlignToScaleBounds","mousePositionX","mousePositionY","isDisabled","__assign","Object","assign","s","i","n","arguments","p","prototype","hasOwnProperty","call","apply","this","__spreadArray","to","from","pack","ar","l","Array","slice","concat","initialState","initialSetup","centerOnInit","wheel","wheelDisabled","touchPadDisabled","activationKeys","pinch","doubleClick","mode","createState","props","previousScale","initialScale","initialPositionX","initialPositionY","createSetup","newSetup","keys","forEach","key","validValue","dataType","toString","isObject","isArray","handleCalculateButtonZoom","delta","targetScale","exp","handleZoomToViewCenter","resetTransformations","onResetTransformation","initialTransformation","newBounds","boundedPositions","newState","zoomIn","zoomOut","setTransform","resetTransform","centerView","getCenterPosition","zoomToElement","node","document","getElementById","customZoom","nodeRect","nodeOffset","element","wrapper","content","state","offset","wrapperOffset","contentOffset","xOff","yOff","getOffset","nodeLeft","nodeTop","nodeWidth","nodeHeight","scaleX","scaleY","offsetX","offsetY","left","top","calculateZoomToNode","getControls","instance","getState","getContext","ref","makePassiveEventOption","passive","err","targetTagName","tagName","toUpperCase","find","tag","className","classList","cancelTimeout","timeout","clearTimeout","getTransformStyles","isWheelAllowed","ctrlKey","getDeltaY","deltaY","getMousePosition","touch","isPinchStartAllowed","isPinchAllowed","pinchStartDistance","getTouchDistance","pow","pageX","pageY","handleWheelStart","onWheelStart","onZoomStart","wheelStopEventTimer","handleWheelZoom","onWheel","onZoom","preventDefault","stopPropagation","customDelta","getDelta","disable","getTarget","paddingEnabled","handleCalculateWheelZoom","mousePosition","isLimitedToBounds","previousWheelEvent","handleWheelStop","onWheelStop","onZoomStop","wheelAnimationTimer","setTimeout","hasStoppedZooming","sign","handleWheelZoomStop","handlePinchStart","distance","lastDistance","pinchStartScale","handlePinchZoom","midPoint","firstPointX","firstPointY","calculateTouchMidPoint","isFinite","currentDistance","calculatePinchZoom","pinchMidpoint","handlePinchStop","handleDoubleClickStop","doubleClickStopEventTimer","handleDoubleClickResetMode","isDoubleClickAllowed","ZoomPanPinch","_this","onChangeCallbacks","Set","onInitCallbacks","lastTouch","maxBounds","pressedKeys","mount","initializeWindowEvents","unmount","cleanupWindowEvents","update","newProps","currentDocument","ownerDocument","currentWindow","defaultView","addEventListener","onPanningStart","onPanning","onPanningStop","clearPanning","setKeyUnPressed","setKeyPressed","removeEventListener","observer","disconnect","handleInitializeWrapperEvents","onWheelZoom","onDoubleClick","onTouchPanningStart","onTouchPanning","onTouchPanningStop","handleInitialize","applyTransformation","setCenter","ResizeObserver","observe","isPressingKeys","onPinchStart","onPinchingStart","onPinch","onPinching","onPinchStop","onPinchingStop","isPanningAction","isPinchAction","handleDoubleClick","e","onTransformed","ctx_1","handleTransformStyles","customTransform","transform","style","onChange","has","add","delete","onInit","init","ctx","Context","React","TransformWrapper","children","useRef","current","useImperativeHandle","useEffect","Provider","refs","localRef","useContext","css","insertAt","head","getElementsByTagName","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","TransformComponent","wrapperClass","contentClass","wrapperStyle","contentStyle","wrapperProps","_e","contentProps","wrapperRef","contentRef","styles","topology","o","objects","features","geometries","map","feature","id","bbox","properties","geometry","transformPoint","identity","x0","y0","kx","ky","dx","translate","dy","input","j","output","arcs","arc","points","pop","a","k","push","array","reverse","point","line","ring","polygon","coordinates","object","_defineProperties","descriptor","enumerable","configurable","writable","defineProperty","toPropertyKey","Adder","Constructor","TypeError","_classCallCheck","_partials","Float64Array","_n","protoProps","staticProps","hi","lo","abs","sourceEvent","currentTarget","svg","ownerSVGElement","createSVGPoint","matrixTransform","getScreenCTM","inverse","rect","clientLeft","clientTop","nonpassive","nonpassivecapture","capture","nopropagation","stopImmediatePropagation","DragEvent","_ref","subject","identifier","active","dispatch","defineProperties","_","defaultFilter","button","defaultContainer","parentNode","defaultSubject","d","defaultTouchable","navigator","maxTouchPoints","mousedownx","mousedowny","mousemoving","touchending","filter","container","touchable","gestures","listeners","clickDistance2","drag","selection","on","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","select","view","mousemoved","mouseupped","root","documentElement","noevent","__noselect","MozUserSelect","nodrag","mouse","noclick","yesdrag","changedTouches","c","that","copy","pointer","p0","constant","clickDistance","epsilon","epsilon2","pi","halfPi","quarterPi","tau","degrees","radians","atan","atan2","sin","ceil","floor","hypot","log","tan","acos","asin","noop","Infinity","x1","y1","boundsStream","lineStart","lineEnd","polygonStart","polygonEnd","result","x00","y00","areaSum","areaRingSum","areaStream","areaRingStart","areaRingEnd","area","areaPointFirst","areaPoint","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroid","NaN","centroidPointFirstLine","centroidPointLine","z","centroidPointFirstRing","centroidPointRing","PathContext","_context","_radius","pointRadius","_line","_point","closePath","moveTo","lineTo","lengthRing","lengthSum","lengthStream","lengthPointFirst","lengthPoint","PathString","_string","circle","radius","projection","projectionStream","contextStream","path","stream","pathArea","measure","pathMeasure","pathBounds","pathCentroid","_circle","join","lines","m","rejoin","shift","b","Intersection","other","entry","v","segments","compareIntersection","startInside","interpolate","clip","segment","p1","pointEqual","sort","link","start","isSubject","spherical","cartesian","lambda","phi","cosPhi","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","vector","cartesianNormalizeInPlace","longitude","flatten","arrays","_iterator","_step","_regeneratorRuntime","wrap","prev","next","_createForOfIteratorHelper","done","delegateYield","t1","f","finish","stop","_marked","merge","pointVisible","clipLine","sink","ringBuffer","clipBuffer","ringSink","polygonStarted","pointRing","ringStart","ringEnd","sinPhi","normal","angle","winding","sum","point0","lambda0","phi0","sinPhi0","cosPhi0","lambda1","sinPhi1","cosPhi1","point1","phi1","absDelta","antimeridian","intersection","phiArc","polygonContains","clipRejoin","sphere","pointLine","clean","ringSegments","validSegment","sign0","sign1","sinLambda0Lambda1","clipAntimeridianIntersect","direction","circleStream","t0","cosRadius","sinRadius","circleRadius","clipMax","clipMin","clipRectangle","visible","a1","corner","comparePoint","ca","cb","x__","y__","v__","x_","y_","v_","first","activeStream","bufferStream","clipStream","linePoint","a0","b0","b1","polygonInside","cleanInside","r","ax","ay","compose","invert","rotationIdentity","round","rotateRadians","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","rotation","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","transformer","methods","TransformStream","constructor","fit","fitBounds","clipExtent","geoStream","fitExtent","extent","w","h","fitSize","fitWidth","fitHeight","maxDepth","cosMinDistance","project","delta2","resampleLineTo","c0","c1","depth","d2","phi2","lambda2","x2","y2","dx2","dy2","dz","lambda00","a00","b00","c00","resampleStream","ringPoint","resample","resampleNone","transformRadians","scaleTranslateRotate","sx","sy","alpha","scaleTranslate","cosAlpha","sinAlpha","ai","bi","ci","fi","projectionMutator","projectAt","rotate","projectResample","projectTransform","projectRotateTransform","cache","cacheStream","theta","preclip","clipAntimeridian","postclip","recenter","center","reset","transformRotate","clipAngle","cr","smallRadius","notHemisphere","intersect","two","n1","n2","n2n2","n1n2","determinant","c2","n1xn2","A","u","uu","t2","q","polar","q1","code","v0","v00","point2","clipCircle","reflectX","reflectY","precision","conicEqualAreaRaw","sy0","forward","cylindricalEqualAreaRaw","r0","r0y","parallels","conicProjection","lower48Point","alaskaPoint","hawaiiPoint","lower48","conicEqualArea","alaska","hawaii","pointStream","albersUsa","streams","multiplex","streamGeometry","streamGeometryType","streamObjectType","Feature","FeatureCollection","Sphere","Point","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","closed","coordinate","selector","Selection","querySelector","querySelectorAll"],"sourceRoot":""}